{"version":3,"sources":["webpack://setjsApp/webpack/bootstrap","webpack://setjsApp/./src/scripts/app/init.js","webpack://setjsApp/./src/scripts/app/seo.js","webpack://setjsApp/./src/scripts/app/site/helper/push.js","webpack://setjsApp/./src/scripts/app/site/init.js","webpack://setjsApp/./src/scripts/app/site/pages/home.js","webpack://setjsApp/./src/scripts/app/site/pages/homeinner.js","webpack://setjsApp/./src/scripts/bootstrap/component-init.js","webpack://setjsApp/./src/scripts/bootstrap/plugin-init.js","webpack://setjsApp/./src/scripts/components/footer.js","webpack://setjsApp/./src/scripts/components/navigation.js","webpack://setjsApp/./src/scripts/config/app-config.js","webpack://setjsApp/./src/scripts/config/event-types.js","webpack://setjsApp/./src/scripts/config/setup.js","webpack://setjsApp/./src/scripts/config/storage-types.js","webpack://setjsApp/./src/scripts/config/user-roles.js","webpack://setjsApp/./src/scripts/core/acts-funcs.js","webpack://setjsApp/./src/scripts/core/app-data.js","webpack://setjsApp/./src/scripts/core/asset-loader.js","webpack://setjsApp/./src/scripts/core/events.js","webpack://setjsApp/./src/scripts/core/route-manager.js","webpack://setjsApp/./src/scripts/core/setjs-init.js","webpack://setjsApp/./src/scripts/entities/sample.js","webpack://setjsApp/./src/scripts/main.js","webpack://setjsApp/./src/scripts/plugins/template-funcs/lazy-load.js","webpack://setjsApp/./src/scripts/setbp/kernel/basics.js","webpack://setjsApp/./src/scripts/setbp/kernel/event-manager.js","webpack://setjsApp/./src/scripts/setbp/kernel/lang-helper.js","webpack://setjsApp/./src/scripts/setbp/kernel/page-loader.js","webpack://setjsApp/./src/scripts/setbp/kernel/page-manager.js","webpack://setjsApp/./src/scripts/setbp/kernel/roles.js","webpack://setjsApp/./src/scripts/setbp/kernel/setjs.js","webpack://setjsApp/./src/scripts/setbp/kernel/storage.js","webpack://setjsApp/./src/scripts/setbp/loaders/progress-bar.js","webpack://setjsApp/./src/scripts/setbp/plugins/jquery/accordion.js","webpack://setjsApp/./src/scripts/setbp/plugins/jquery/carousel.js","webpack://setjsApp/./src/scripts/setbp/plugins/jquery/form-json.js","webpack://setjsApp/./src/scripts/setbp/plugins/jquery/lightbox.js","webpack://setjsApp/./src/scripts/setbp/plugins/misc/animate-visible.js","webpack://setjsApp/./src/scripts/setbp/plugins/misc/dropdown-menu.js","webpack://setjsApp/./src/scripts/setbp/plugins/template-funcs/basic-filters.js","webpack://setjsApp/./src/scripts/setbp/plugins/template-funcs/misc.js","webpack://setjsApp/./src/scripts/setbp/router/history-router.js","webpack://setjsApp/./src/scripts/setbp/template/binding.js","webpack://setjsApp/./src/scripts/setbp/template/component.js","webpack://setjsApp/./src/scripts/setbp/template/events.js","webpack://setjsApp/./src/scripts/setbp/template/template-config.js","webpack://setjsApp/./src/scripts/setbp/template/templates.js","webpack://setjsApp/./src/scripts/setbp/ui/alert-box.js","webpack://setjsApp/./src/scripts/setbp/utility/array.js","webpack://setjsApp/./src/scripts/setbp/utility/assets.js","webpack://setjsApp/./src/scripts/setbp/utility/calls.js","webpack://setjsApp/./src/scripts/setbp/utility/comp-helpers.js","webpack://setjsApp/./src/scripts/setbp/utility/lazy-media.js","webpack://setjsApp/./src/scripts/setbp/utility/objects.js","webpack://setjsApp/./src/scripts/setbp/utility/strings.js"],"names":["success","siteInit","$head","$","eventManager","addListener","eventTypes","loadStart","route","prop","langHelper","data","parts","path","split","home","meta","title","subTitle","description","image","length","shift","document","find","attr","remove","lang","pathPrefix","window","location","origin","router","prefix","setup","languages","forEach","$el","cn","append","fN","n","undefined","slice","print2D","valuedBoxComp","console","log","i","str","j","ind","toString","redraw","valuedBoxCompArr","objKey","tempComp","position","top","left","topi","lefti","update","push","rC","rotate","prevInd","canMove","tempCompInd","thisComp","preComp","canMerge","value","$root","parentElement","removeChild","arr","newArr","maxL","pushUp","cb","valuedBoxCompNew","pushDown","pushLeft","pushRight","addPage","homeinner","addPaths","emptyboxesrow","initValues","boxComp","emptyboxescol","canGenerate","ci","cj","mouseActions","addValuedBox","Math","floor","random","valueGood","isValid","valuedBox","getComp","$boxCont","onkeydown","checkKey","e","event","updatedValueBoxComp","keyCode","preventDefault","templates","comp","init","footerInit","navInit","jqFuncs","replaceWith","closeCls","wheelDelay","preload","loading","loaded","unload","resize","scroll","view","wheel","gdpr","user","templateUrls","urls","map","x","timestamp","obj","each","key","storageTypes","name","type","eventAfter","roleFlags","unknown","author","editor","admin","roles","role","functions","actions","jqList","act","funcName","msg","func","indexOf","val","val2","arguments","list","concat","addAction","onFunc","addFuncs","funcs","Object","keys","id","priority","setDefData","opts","batchCall","add","initSampleEntities","go","errMsg","preFuncs","postFuncs","createBatch","page","progress","callbacks","bc","extend","addAssetFunc","postFunc","prePageAssets","ensureTemplates","jqErr","loadAssets","urlSets","getAssets","assets","postPageAssets","documentTop","viewUpdate","eventType","height","scrollTop","bottom","change","raiseEvent","createViewEvent","delay","throttle","on","pendingMsg","addEventListener","returnValue","processRoute","pageLoader","handleRoute","allowRoute","pageId","alertBox","message","noTxt","okTxt","no","alertController","close","setRoute","prevRoute","ok","storage","get","token","setPending","lastLinkClick","fixPath","pathStr","RegExp","test","replace","getLink","subRoute","compUpdate","$selection","funcWithSelf","$link","dHref","closest","off","metaKey","Date","now","handleEvent","args","action","busy","stopPropagation","originalEvent","changedTouches","_e","$button","addClass","removeClass","error","end","messageObj","cls","$formMsg","text","initSetjs","getUsers","getJSON","fail","getUser","getUserPosts","start","settings","loadTemplates","html","initialiseSetjs","initError","appInit","startApp","initAppData","initData","lazyImg","makeLazy","lazyBg","defData","fatal","info","extra","getPropDef","propPath","getProp","dataForName","events","v","config","method","listener","hasData","sort","removeListener","removeFromListByValue","_args","item","unshift","p","pageOnly","splice","addEventListeners","types","listeners","langData","isSupported","done","_langData","setLang","_lang","connectionError","getRoute","arg","getPath","dataFile","isRtl","loginManager","pageData","count","setLoginManager","_loginManager","handleAuthError","showError","compName","loader","loadContent","authError","error_code","errName","result","notFound","unloadPage","pageComp","loadPage","getPage","progressTimeout","showBlank","testRole","getRole","login","serialCall","condition","actionOpts","errorHandler","once","postAssets","percent","clearTimeout","dummyPageFunc","setTimeout","errors","jqXHR","status","pages","createComp","createCompFunc","template","createPage","folder","paths","addPath","pattern","addPrefixedPaths","addFolderPages","names","accessFlag","setAccessFlag","flag","roleFlag","roleList","roleName","cascadeRoleFlag","setjs","currentRoute","oldRoute","skipRout","makeRoute","join","slug","baseRouteHandler","newRoute","fixedPath","_skipRout","fire","reloadPage","setjsExt","memory","store","storageTypesInit","set","toggle","raise","storeType","localStorage","getItem","def","defaultValue","isNaN","JSON","parse","stringify","setItem","newVal","removeItem","$container","$prev","blankTime","animDuration","$body","$bar","appendTo","hide","bodyStyle","bodyCls","css","width","min","$content","bodyCss","fadeOut","focus","max","show","fn","accordion","$accordion","aimationTime","time","$item","index","$open","open","hasClass","animate","$inner","siblings","innerHeight","outerHeight","$summary","$details","carousel","$items","isActive","selectSlide","prev","next","_count","setActive","activeState","stop","clearInterval","timerHandle","setBtnState","isBounded","$left","toggleClass","$right","_index","force","direction","$buttons","filter","$current","lastTime","prevIndex","nextIndex","select","click","swipe","move","y","changeX","setInterval","created","keep","formJson","resets","resetObject","serializeArray","storeValue","lightbox","mode","$lightbox","$btnParent","inner","destroy","replaceContent","openCls","openingCls","closingCls","empty","closed","noClose","initCarousel","noBtns","target","addCloseBtn","$btn","noBgClose","$target","ownClose","not","elTop","offset","elBottom","$menuBtn","$found","$menu","number","slugify","capitalize","suffix","wrap","right","fixed","places","toFixed","equal","other","testFlag","bool","round","ceil","negate","json","either","val1","commaList","lowerCase","toLowerCase","includes","setEmptyBox","style","t","h","gt","lt","plurify","singular","plural","dloc","pathname","history","pushState","routeHandler","onpopstate","watchSet","Set","watchMap","WeakMap","updateWatches","getStatements","bindingStr","statements","opType","strip","char","escape","parseError","pushOp","o","s","createBindings","rdata","isIf","bindings","binding","funcBinding","statement","g","f","pushFunc","statementVal","groups","getBindingVal","runFuncs","applyText","param","apply","getGroupVal","processIf","dataIf","rComp","group","$next","nextUntil","runBinding","groupVal","applyBindings","ensureWatch","watch","props","acts","objChange","parentWatch","oldVal","newWatch","found","setupWatch","pAct","wAct","cleanupWatch","has","defineProperty","processWatch","size","applyWatch","processSlot","slotConfig","slotComp","createComponent","getConfigTemplate","configData","contents","storeItemByName","renderList","listData","c","oldList","elements","itemData","d","k","itemComp","alt","sub","getTemplate","$elements","createList","vars","templateStr","pComp","$watchElements","$bindingElements","$actElements","$listElements","tmpStr","jquery","el","src","findWithSelf","bindEvents","templateName","down","up","out","form","callerName","tId","subs","source","dataFunc","rd","match","group1","group2","doneUrls","url","extractListHtml","$list","listHtml","tName","children","processList","$parent","selector","$childLists","tree","depth","parents","reverse","branch","$html","outerHTML","isBusy","exOpts","noBtn","alertComp","controller","errorMsg","items","a","b","removeFromList","prop1","prop2","shuffle","array","counter","temp","getUniqueList","unique","thing","obtain","prop3","getVal","randItem","randItems","spinIndex","limit","current","listOverlap","list1","list2","overlap","one","getFileMimeType","file","callback","File","FileReader","FileList","Blob","filereader","onload","evt","hex","Array","prototype","call","Uint8Array","toUpperCase","reg","m","jpg","png","gif","ext","onerror","readAsArrayBuffer","fileAsDataURL","reader","readAsDataURL","processUrlLoad","processLoaded","getElementsByTagName","appendChild","unloadHead","loadJS","createElement","loadCSS","rel","href","loadUrls","kind","errorCb","testArray","otherwise","isArray","loadJSCSS","loadImage","complete","img","Image","cancel","loadImages","code","imageAJAX","ajax","beforeSend","prog","onprogress","lengthComputable","total","wait","immediate","timeout","context","later","callNow","debounce","calls","callManager","errObj","res","rem","dataName","addBack","pending","contains","body","loadFullMedia","manageVideos","isReady","getBoundingClientRect","pause","play","loadFunc","video","getVideo","oncanplay","videoCallback","readyState","processImage","mediaLoaded","muted","paused","lazyMedia","processLazy","parent","processType","listIndex","parsePath","mark","skip","addObj","resetItem","part","listItem","partIndex","_path","_val","storeInArray","storeInObject","tmp","copyObj","data2","string","charAt","getStrHash","hash","charCodeAt","supplant","r","getInitials","initials","pop","prettyTime","num","timeToText","ms","total_seconds","hours","minutes","seconds"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/scripts/main.js\");\n","import './seo.js';\n\nimport siteInit from './site/init.js';\n\nexport default function({success}) {\n  siteInit();\n  success();\n}\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\nimport langHelper from 'setbp/kernel/lang-helper.js';\nimport router from 'Router';\nimport setup from 'config/setup.js';\n\nconst $head = $('head');\n\neventManager.addListener(eventTypes.loadStart, 'seo', function({route}) {\n  let prop = langHelper.data();\n  let parts = route.path.split('/');\n  let {title, subTitle, description, image} = prop.home.meta;\n\n  while (prop && parts.length) {\n    prop = prop[parts.shift()];\n    if (prop && prop.meta) {\n      title = prop.meta.title || title;\n      subTitle = prop.meta.subTitle || subTitle;\n      description = prop.meta.description || description;\n    }\n  }\n  if (subTitle) {\n    title += '  ' + subTitle;\n  }\n  document.title = title;\n  $head.find('link[rel=\"image_src\"]').attr('content', image);\n  $head.find('[name=\"description\"]').attr('content', description);\n  $head.find('[property=\"og:title\"]').attr('content', title);\n  $head.find('[property=\"og:description\"]').attr('content', description);\n  $head.find('[property=\"og:image\"]').attr('content', image);\n  $head.find('[property=\"twitter:title\"]').attr('content', title);\n  $head.find('[property=\"twitter:description\"]').attr('content', description);\n  $head.find('[property=\"twitter:image\"]').attr('content', image);\n  $head.find('link[rel=\"alternate\"]').remove();\n  if (route.lang) {\n    let pathPrefix = window.location.origin + router.prefix;\n    setup.languages().forEach(function(lang) {\n      if (lang !== route.lang) {\n        var $el = $('<link rel=\"alternate\">')\n                    .attr('hreflang', {cn: 'zh-TW'}[lang] || lang)\n                    .attr('href', pathPrefix + lang + (route.path ? '/' + route.path : ''));\n        $head.append($el);\n      }\n    });\n  }\n});\n","function fN(n) {\r\n  if(n == undefined) {\r\n    return 'nn';\r\n  }\r\n  return ('0' + n).slice(-2);\r\n}\r\n\r\nfunction print2D(valuedBoxComp) {\r\n  console.log('********************************');\r\n  for(let i=0; i<4; i++) {\r\n    let str = '** ';\r\n    for(let j=0; j<4; j++) {\r\n      let ind = i.toString() + j;\r\n      str += `${fN(valuedBoxComp[ind])}`;\r\n      if(j<3) {\r\n        str += ', ';\r\n      } else {        \r\n        str += ' **';\r\n      }\r\n    }\r\n    console.log(str);\r\n  }\r\n  console.log('********************************');\r\n}\r\n\r\nfunction redraw(valuedBoxCompArr, valuedBoxComp) {\r\n  for(let i=0; i<4; i++) {\r\n    for(let j=0; j<4; j++) {\r\n      let objKey = i.toString() + j.toString();\r\n      if(valuedBoxComp[objKey] != undefined) {\r\n        let tempComp = valuedBoxCompArr[valuedBoxComp[objKey]];\r\n        tempComp.data.position.top = i*25 + '%';\r\n        tempComp.data.position.left = j*25 + '%';\r\n        \r\n        tempComp.data.position.topi = i;\r\n        tempComp.data.position.lefti = j;\r\n        tempComp.update();\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction push(valuedBoxCompArr, valuedBoxComp, rC) {\r\n\r\n  for(let i=0; i<rC; i++) {\r\n    valuedBoxComp = rotate(valuedBoxComp);\r\n  }\r\n\r\n  for(let i=0; i<4; i++) {\r\n    for(let j=1; j<4; j++) {\r\n      let objKey = j.toString() + i.toString();\r\n      if(valuedBoxComp[objKey] != undefined) {\r\n        let prevInd = j;\r\n        let canMove = prevInd-1 > -1 && valuedBoxComp[(prevInd-1) + i.toString()] == undefined;\r\n        let tempCompInd = valuedBoxComp[objKey];\r\n        while(canMove) {\r\n          valuedBoxComp[(prevInd) + i.toString()] = undefined;\r\n          valuedBoxComp[(prevInd-1) + i.toString()] = tempCompInd;\r\n          prevInd--;\r\n          canMove = prevInd-1 > -1 && valuedBoxComp[(prevInd-1) + i.toString()] == undefined;\r\n        }\r\n\r\n        if(prevInd > 0) {\r\n          \r\n          let thisComp = valuedBoxCompArr[valuedBoxComp[(prevInd) + i.toString()]];\r\n          let preComp = valuedBoxCompArr[valuedBoxComp[(prevInd-1) + i.toString()]];\r\n          let canMerge = prevInd-1 > -1 && preComp.data.value == thisComp.data.value;\r\n\r\n          while(canMerge) {\r\n            valuedBoxComp[(prevInd) + i.toString()] = undefined;\r\n\r\n            preComp.data.value += thisComp.data.value;\r\n            thisComp.$root[0].parentElement.removeChild(thisComp.$root[0]);\r\n            prevInd--;\r\n            if(prevInd-1 > -1) {\r\n              thisComp = preComp;\r\n              preComp = valuedBoxCompArr[valuedBoxComp[(prevInd-1) + i.toString()]];\r\n            }\r\n            canMerge = prevInd-1 > -1 && preComp.data.value == thisComp.data.value;\r\n          }\r\n        }\r\n      }      \r\n    }\r\n  }\r\n  for(let i=0; i<4-rC; i++) {\r\n    valuedBoxComp = rotate(valuedBoxComp);\r\n  }\r\n  redraw(valuedBoxCompArr, valuedBoxComp);\r\n  return valuedBoxComp;\r\n}\r\n\r\nfunction rotate(arr) {\r\n  let newArr = {};\r\n  let maxL = 4;\r\n  for(let i=0; i<maxL; i++) {\r\n    for(let j=0; j<maxL; j++) {\r\n\r\n      let ind = i.toString() + j.toString();\r\n      if(arr[ind] != undefined) {\r\n        newArr[j + (maxL-1-i).toString()] = arr[ind];\r\n      }\r\n    }\r\n  }\r\n  return newArr;\r\n}\r\nfunction pushUp(valuedBoxCompArr, valuedBoxComp, cb) {\r\n  var valuedBoxCompNew =push(valuedBoxCompArr, valuedBoxComp, 0);\r\n  cb && cb(valuedBoxCompNew, 3, undefined);\r\n}\r\nfunction pushDown(valuedBoxCompArr, valuedBoxComp, cb) {\r\n  var valuedBoxCompNew =push(valuedBoxCompArr, valuedBoxComp, 2);\r\n  cb && cb(valuedBoxCompNew, 0, undefined);\r\n}\r\nfunction pushLeft(valuedBoxCompArr, valuedBoxComp, cb) {\r\n  var valuedBoxCompNew =push(valuedBoxCompArr, valuedBoxComp, 1);\r\n  cb && cb(valuedBoxCompNew, undefined, 3);\r\n}\r\nfunction pushRight(valuedBoxCompArr, valuedBoxComp, cb) {\r\n  var valuedBoxCompNew = push(valuedBoxCompArr, valuedBoxComp, 3);\r\n  cb && cb(valuedBoxCompNew, undefined, 0);\r\n}\r\n\r\nexport default {\r\n  pushUp,\r\n  pushDown,\r\n  pushLeft,\r\n  pushRight,\r\n  print2D\r\n};","import {addPage, addPaths} from 'setbp/kernel/page-manager.js';\n\nimport './api.js';\nimport './template-functions.js';\nimport home from './pages/home.js';\nimport homeinner from './pages/homeinner.js';\n\nexport default function() {\n  addPage('', home);\n  addPage('homeinner', homeinner);\n  addPaths('site', ['about']);\n}\n","import getComp from 'setbp/template/component.js';\nimport mouseActions from 'app/site/helper/push.js';\n\nvar emptyboxesrow =[];\nvar initValues = [2, 4];\nvar boxComp;\nvar valuedBoxCompArr = [];\nvar valuedBoxComp = {};\nfor(let i=0; i<4; i++) {\n  var emptyboxescol =[];\n  for(let j=0; j<4; j++) {\n    emptyboxescol.push({left: (j*25)+'%', top: (i*25)+'%'});\n  }\n  emptyboxesrow.push({emptyboxescol});\n}\n\nfunction canGenerate(ci, cj) {\n  mouseActions.print2D(valuedBoxComp);\n  if(ci == undefined) {\n    for(let i=0; i<4; i++) {\n      if(valuedBoxComp[i + cj.toString()] == undefined) {\n        return true;\n      }\n    }\n  } else {\n    for(let j=0; j<4; j++) {\n      if(valuedBoxComp[ci.toString() + j] == undefined) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction addValuedBox(ci, cj) {\n  let value = initValues[Math.floor(Math.random()*100)%2];\n  let valueGood = false;\n  if(!canGenerate(ci, cj)) {\n    console.log('row full.');\n    return;\n  }\n  while(!valueGood) {\n    let ind = Math.floor(Math.random()*100)%4;\n    let isValid = false;\n    if(ci == undefined) {\n      isValid = valuedBoxComp[ind + cj.toString()] == undefined;\n    }\n    if(cj == undefined) {\n      isValid = valuedBoxComp[ci.toString() + ind] == undefined;\n    }\n    if(isValid) {\n      if(ci == undefined) { ci = ind; }\n      if(cj == undefined) { cj = ind; }\n      let position = {top: 25*ci+'%', left: 25*cj+'%', topi: ci, lefti: cj};\n      var valuedBox = getComp('component/home/valuedbox', {value, position}, {});\n      valuedBoxCompArr.push(valuedBox);\n      valuedBoxComp[ci.toString() + cj.toString()] = valuedBoxCompArr.length - 1;\n      boxComp.$boxCont.append(valuedBox.$root);\n      valueGood = true;\n    }\n  }\n}\n\n\ndocument.onkeydown = checkKey;\nfunction checkKey(e) {\n\n    e = e || window.event;\n\n    var cb = function(updatedValueBoxComp, ci, cj) {\n      valuedBoxComp = (updatedValueBoxComp);\n      addValuedBox(ci, cj);\n    };\n    if (e.keyCode == '38') {\n      mouseActions.pushUp(valuedBoxCompArr, valuedBoxComp, cb);\n    }\n    else if (e.keyCode == '40') {\n        // down arrow\n        mouseActions.pushDown(valuedBoxCompArr, valuedBoxComp, cb);\n    }\n    else if (e.keyCode == '37') {\n       // left arrow\n       mouseActions.pushLeft(valuedBoxCompArr, valuedBoxComp, cb);\n    }\n    else if (e.keyCode == '39') {\n       // right arrow\n       mouseActions.pushRight(valuedBoxCompArr, valuedBoxComp, cb);\n    }\n    e.preventDefault();\n}\n\nexport default {\n  templates: ['site/home'],\n  comp: function() {  \n    boxComp = getComp('site/home', {emptyboxesrow}, {});\n    addValuedBox(3);  \n    return boxComp;\n  }\n};\n","import getComp from 'setbp/template/component.js';\n\nexport default {\n  templates: ['site/homeinner'],\n  comp: function() {\n    return getComp('site/homeinner');\n  }\n};\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\n\nimport footerInit from 'components/footer.js';\nimport navInit from 'components/navigation.js';\n\neventManager.addListener(eventTypes.init, 'comp-init', function() {\n  footerInit();\n  navInit();\n});\n","import {jqFuncs} from 'core/acts-funcs.js';\n\njqFuncs(['accordion', 'forceNumber', 'instagram', 'marquee', 'selectize']);\n\n/*------------setbp plugins-----------*/\nimport 'setbp/plugins/jquery/accordion.js';\nimport 'setbp/plugins/jquery/carousel.js';\nimport 'setbp/plugins/jquery/form-json.js';\nimport 'setbp/plugins/jquery/lightbox.js';\n\nimport 'setbp/plugins/misc/animate-visible.js';\nimport 'setbp/plugins/misc/dropdown-menu.js';\n\nimport 'setbp/plugins/template-funcs/basic-filters.js';\nimport 'setbp/plugins/template-funcs/misc.js';\n\n/*------------Application plugins-----------*/\nimport 'plugins/template-funcs/lazy-load.js';\n","import getComp from 'setbp/template/component.js';\nimport eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\n\n\nexport default function() {\n  var comp = getComp('common/footer');\n  $('#footer-placeholder').replaceWith(comp.$root);\n  eventManager.addListener(eventTypes.route, 'footer', comp.update, null);\n}\n","import getComp from 'setbp/template/component.js';\nimport eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\n\n\nexport default function() {\n  var comp = getComp('common/navigation');\n  $('#nav-placeholder').replaceWith(comp.$root);\n  eventManager.addListener(eventTypes.route, 'nav', comp.update, null);\n}\n","export {default as loader} from 'setbp/loaders/progress-bar.js';\nexport {viewUpdate} from 'core/events.js';\nexport var closeCls = 'set-close';\nexport var wheelDelay = 1500;\n","export default {\n  init: 1,\n  route: 2,\n  loadStart: 3,\n  preload: 4,\n  loading: 5,\n  loaded: 6,\n  unload: 7,\n  resize: 8,\n  scroll: 9,\n  view: 10,\n  wheel: 11,\n  lang: 12,\n  gdpr: 13,\n  user: 14,\n};\n","var setup = {\n  templateUrls: function(urls) {\n    return urls.map(x => '/templates/' + x + '.html?t=' + setup.timestamp());\n  },\n  init: function(obj) {\n    $.each(obj, function(key, value) {\n      if (setup[key]) {\n        throw 'Duplicate key: ' + key;\n      }\n      setup[key] = function() {\n        return value;\n      };\n    });\n  },\n};\n\nexport default setup;\n","import eventTypes from 'config/event-types.js';\n\nexport var storageTypes = {\n  // An example of a storage type object, used by the local/memory storage module from setbp\n  gdpr: {name: 'gdpr', type: 'boolean', eventAfter: eventTypes.gdpr},\n};\n\nexport default function() {\n  // add storage types that must be added dynamically here (e.g. using setup methods)\n  // this will be called by scripts/setbp/kernel/storage.js when main.js loads it\n}\n","export const roleFlags = {\n  unknown: 1,\n  public: 2,\n  author: 4,\n  editor: 8,\n  admin: 16,\n  super: 32,\n};\n\nexport const roles = [\n  {name: 'Public', role:'public'},\n  {name: 'Author', role:'author'},\n  {name: 'Editor', role:'editor'},\n  {name: 'Admin', role:'admin'},\n  {name: 'Super', role:'super'},\n];\n","var functions = {};\nvar actions = {};\nvar jqList = ['attr', 'css', 'data', 'html', 'prop', 'text', 'toggleClass', 'val'];\n\nexport function act(funcName) {\n  if (actions[funcName]) {\n    return actions[funcName];\n  }\n  throw {msg: 'No such function', name: funcName};\n}\n\nexport function func(funcName) {\n  if (functions[funcName]) {\n    return functions[funcName];\n  } else if (jqList.indexOf(funcName) >= 0) {\n    functions[funcName] = function(val, {$el}, val2) {\n      if (arguments.length > 2) {\n        $el[funcName](val2, val);\n      } else {\n        $el[funcName](val);\n      }\n    };\n    return functions[funcName];\n  } else {\n    throw {msg: 'No such function', name: funcName};\n  }\n}\n\nexport function jqFuncs(list) {\n  jqList = jqList.concat(list);\n}\n\nexport function addAction(name, onFunc) {\n  if (actions[name]) {\n    throw 'action exists: ' + name;\n  }\n  actions[name] = onFunc;\n}\n\nexport function addFuncs(funcs) {\n  Object.keys(funcs).forEach(function(funcName) {\n    if (functions[funcName] || typeof funcs[funcName] != 'function') {\n      throw {msg: 'Duplicate or not a function', funcName, funcs};\n    }\n    functions[funcName] = funcs[funcName];\n  });\n}\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\nimport {setDefData} from 'setbp/kernel/basics.js';\nimport {batchCall} from 'setbp/utility/calls.js';\nimport initSampleEntities from 'entities/sample.js';\n\n['init', 'route', 'user', 'lang'].forEach(function(name) {\n  eventManager.addListener(eventTypes[name], {id: 'data', priority: 1}, function(data) {\n    name = name == 'init' ? 'route' : name;\n    setDefData(name, data);\n  });\n});\n\nexport default function(opts) {\n  batchCall(opts)\n  .add(initSampleEntities)\n  .go();\n}\n","import {ensureTemplates} from 'setbp/template/templates.js';\nimport setup from 'config/setup.js';\nimport {loadAssets} from 'setbp/utility/assets.js';\nimport {batchCall} from 'setbp/utility/calls.js';\n\nvar errMsg = 'Unable to load page assets. Please check your connection and try again.';\nvar preFuncs = [];\nvar postFuncs = [];\n\nfunction createBatch(list, page, route, progress, callbacks) {\n  var data = {page, route};\n  var bc = batchCall($.extend({progress}, callbacks));\n  list.forEach(func => {\n    bc.add(func, data);\n  });\n  return bc;\n}\n\nexport function addAssetFunc(func, postFunc) {\n  if (postFunc) {\n    postFuncs.push(func);\n  } else {\n    preFuncs.push(func);\n  }\n}\n\nexport function prePageAssets(page, route, progress) {\n  return function(callbacks) {\n    createBatch(preFuncs, page, route, progress, callbacks)\n    .add(ensureTemplates, {urls: setup.templateUrls(page.templates || []), jqErr: 1})\n    .add(loadAssets, {urlSets: ('getAssets' in page && page.getAssets(route, page)) || page.assets, errMsg})\n    .go();\n  };\n}\n\nexport function postPageAssets(page, route, progress) {\n  return function(callbacks) {\n    createBatch(postFuncs, page, route, progress, callbacks).go();\n  };\n}\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\nimport {throttle} from 'setbp/utility/calls.js';\n\nvar documentTop = 0;\n\nexport function viewUpdate(eventType, $el) {\n  var height = $(window).height();\n  var top = ($el || $(document)).scrollTop();\n  var bottom = top + height;\n  var change = top - documentTop;\n  eventType && eventManager.raiseEvent(eventType, top, bottom, height, change);\n  eventManager.raiseEvent(eventTypes.view, top, bottom, height, change);\n  documentTop = top;\n}\n\nfunction createViewEvent(eventType, delay) {\n  return throttle(function() {\n    viewUpdate(eventType);\n  }, delay || 20);\n}\n\n$(window).on('scroll', createViewEvent(eventTypes.scroll));\n$(window).on('resize', createViewEvent(eventTypes.resize, 100));\n","import {setRoute, prevRoute} from 'setbp/kernel/setjs.js';\nimport storage, {storageTypes} from 'setbp/kernel/storage.js';\nimport eventManager from 'setbp/kernel/event-manager.js';\nimport pageLoader from 'setbp/kernel/page-loader.js';\nimport alertBox from 'setbp/ui/alert-box.js';\n\nvar pendingMsg;\n\nwindow.addEventListener('beforeunload', (event) => {\n  if (pendingMsg) {\n    event.preventDefault();\n    event.returnValue = '';\n  }\n});\n\nfunction processRoute(route) {\n  eventManager.route(route);\n  pageLoader.handleRoute(route);\n}\n\nfunction allowRoute(route) {\n  var {pageId} = route;\n  if (pendingMsg) {\n    alertBox({\n      message: pendingMsg,\n      noTxt: 'Stay',\n      okTxt: 'Leave',\n      no: function(alertController) {\n        alertController.close();\n        setRoute(prevRoute().path, 1);\n      },\n      ok: function(alertController) {\n        pendingMsg = 0;\n        alertController.close();\n        handleRoute(route);\n      },\n    });\n  } else if (['login', 'forgot-password'].indexOf(pageId) >= 0 && storage.get(storageTypes.token)) {\n    setRoute();\n  } else {\n    return 1;\n  }\n}\n\nexport function setPending(msg) {\n  pendingMsg = msg;\n}\n\nexport default function handleRoute(route) {\n  if (allowRoute(route)) {\n    processRoute(route);\n  }\n}\n","import {initSetjs, setRoute} from 'setbp/kernel/setjs.js';\nimport {funcWithSelf} from 'setbp/utility/comp-helpers.js';\nimport langHelper from 'setbp/kernel/lang-helper.js';\nimport handleRoute from 'core/route-manager.js';\n\nvar lastLinkClick = 0;\n\nfunction fixPath(pathStr) {\n  if (RegExp('account/(confirm|reset-password)/.+/').test(pathStr)) {\n    return pathStr;\n  }\n  return pathStr.replace(/\\/{2,}/g, '/').replace(/(.+)\\/$/, '$1');\n}\n\nfunction getLink(subRoute) {\n  let lang = langHelper.lang();\n  return fixPath('/' + (lang ? lang + '/' : '')  + (subRoute || ''));\n}\n\nfunction compUpdate($selection) {\n  funcWithSelf($selection, 'href', function($link, dHref) {\n    if ($link.data('dHref') != dHref && !$link.closest('[data-no-links]').length) {\n      if ($link.attr('target') != '_blank') {\n        $link.off('.hr').on('click.hr', function(e) {\n          if (!e.metaKey) {\n            e.preventDefault();\n            if (Date.now() - lastLinkClick > 900) {\n              setRoute(dHref);\n              lastLinkClick = Date.now();\n            }\n          }\n        });\n      }\n      $link.data('dHref', dHref).attr('href', getLink(dHref));\n    }\n  });\n}\n\nfunction handleEvent(args, func) {\n  let {comp, $el, action, e} = args;\n  if (comp.busy || e.type == 'submit' || $el.data('stop')) {\n    // Do this early to avoid default browser action in case of errors\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  if (!comp.busy) {\n    if (e.originalEvent && e.originalEvent.changedTouches && e.originalEvent.changedTouches.length) {\n      args._e = e;\n      args.e = e.originalEvent.changedTouches[0];\n    }\n    if (action == 'form') {\n      let $button = $el.find('[type=\"submit\"]');\n      comp.busy = true;\n      $button.prop('disabled', true);\n      $el.addClass('loading').removeClass('error success');\n      args.error = function(message) {\n        args.end('error', message);\n      };\n      args.success = function(messageObj) {\n        args.end('success', (messageObj && messageObj.message) || messageObj);\n      };\n      args.end = function(cls, message) {\n        comp.busy = false;\n        $el.removeClass('loading').addClass(cls);\n        $button.prop('disabled', false);\n        $('body').removeClass('loading');\n        if (comp.$formMsg) {\n          comp.$formMsg.text(message || '');\n        }\n      };\n    }\n    func(args);\n  }\n}\n\nexport default function() {\n  initSetjs({\n    fixPath,\n    getLink,\n    compUpdate,\n    handleEvent,\n    handleRoute,\n    lang: langHelper.lang,\n  });\n}\n","export function getUsers({success, error}) {\n  $.getJSON('//jsonplaceholder.typicode.com/users', success).fail(error);\n}\n\nexport function getUser(id, {success, error}) {\n  $.getJSON('//jsonplaceholder.typicode.com/users/' + id, success).fail(error);\n}\n\nexport function getUserPosts(id, {success, error}) {\n  $.getJSON('//jsonplaceholder.typicode.com/posts?userId=' + id, success).fail(error);\n}\n\nexport default function(opts) {\n  // This method is called by core/app-data.js for initialisation\n  // Here you can perform any initialisation including API use. Just call opts.success when done\n  // if there's a fatal error, call opts.error. The application will stop loading with error\n  opts.success();\n}\n\n","import {startApp} from 'setbp/kernel/setjs.js';\nimport setup from 'config/setup.js';\nimport langHelper from 'setbp/kernel/lang-helper.js';\nimport initAppData from 'core/app-data.js';\nimport storage from 'setbp/kernel/storage.js';\nimport pageLoader from 'setbp/kernel/page-loader.js';\nimport {batchCall} from 'setbp/utility/calls.js';\nimport appInit from 'app/init.js';\nimport initialiseSetjs from 'core/setjs-init.js';\nimport {loadTemplates, ensureTemplates} from 'setbp/template/templates.js';\n\nimport 'bootstrap/plugin-init.js';\nimport 'bootstrap/component-init.js';\n\nexport function start(settings) {\n  setup.init(settings);\n  storage.init();\n  langHelper.init();\n  loadTemplates($('#init-error').html());\n  initialiseSetjs();\n  batchCall({\n    error: pageLoader.initError,\n    success: function() {\n      appInit({\n        error: pageLoader.initError,\n        success: startApp,\n      });\n    }\n  })\n  .add(ensureTemplates, {urls: setup.templateUrls(['common'])})\n  .add(initAppData)\n  .add(langHelper.initData)\n  .go();\n}\n","import {addFuncs} from 'core/acts-funcs.js';\nimport {makeLazy} from 'setbp/utility/lazy-media.js';\n\naddFuncs({\n  lazyImg: makeLazy('src'),\n  lazyBg: makeLazy('bg'),\n});\n","import {getProp} from 'setbp/utility/objects.js';\n\nvar defData = {};\n\nexport function fatal(msg, info, ...extra) {\n  throw {msg, info, extra};\n}\n\nexport function getPropDef(propPath, data) {\n  return getProp(propPath, data, defData);\n}\n\nexport function setDefData(name, val) {\n  defData['@' + name] = val;\n}\n\nexport function dataForName(name, data) {\n  return name in data ? data : name in defData ? defData : null;\n}\n","import {sort, removeFromListByValue} from 'setbp/utility/array.js';\nimport eventTypes from 'config/event-types.js';\n\nvar events = {};\n\n$.each(eventTypes, function (i, v) {\n  events[v] = [];\n});\n\nvar eventManager = {\n  route: function(route) {\n    eventManager.raiseEvent(eventTypes.init || eventTypes.route, route);\n    delete events[eventTypes.init];\n    eventTypes.init = 0;\n  },\n  addListener: function (type, config, method, data) {\n    var listener = {priority: config.priority || 3, config, method, data, hasData: arguments.length > 3};\n    events[type].push(listener);\n    sort(events[type], 'priority');\n    if (typeof method != 'function') {\n      throw 'Not a function';\n    }\n    return listener;\n  },\n  removeListener: function (type, listener) {\n    listener && removeFromListByValue(events[type], listener.method || listener, 'method');\n  },\n  raiseEvent: function (type, ..._args) {\n    events[type].forEach(function (item) {\n      var args = _args.slice();\n      try {\n        if (item.hasData) {\n          args.unshift(item.data);\n        }\n        item.method(...args);\n      } catch (e) {\n        throw {type, item, args, e};\n      }\n    });\n  }\n};\n\neventManager.addListener(eventTypes.unload, {p: 'em', priority: 5}, function() {\n  $.each(events, function(name, list) {\n    for (var i = list.length - 1; i >= 0; i--) {\n      if (list[i].config.pageOnly) {\n        list.splice(i, 1);\n      }\n    }\n  });\n});\n\nexport {eventTypes};\nexport default eventManager;\n\nexport function addEventListeners(types, ...args) {\n  var listeners = [];\n  types.forEach(function(type) {\n    listeners.push(eventManager.addListener(type, ...args));\n  });\n  return listeners;\n}\n","import {getRoute, setRoute} from 'setbp/kernel/setjs.js';\nimport router from 'Router';\nimport setup from 'config/setup.js';\nimport {addAction} from 'core/acts-funcs.js';\nimport eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\nimport pageLoader from 'setbp/kernel/page-loader.js';\n\nvar languages, lang, langData;\n\nfunction isSupported(lang) {\n  return languages.indexOf(lang) >= 0;\n}\n\nfunction initData({success, error}) {\n  if (!lang) {\n    success();\n  } else {\n    $.getJSON(`/data/lang/${lang}.json?t=${setup.timestamp()}`)\n      .done(function(_langData) {\n        _langData.lang = lang;\n        langData = _langData;\n        eventManager.raiseEvent(eventTypes.lang, langData);\n        success();\n      })\n      .fail(error);\n  }\n}\n\nfunction setLang(_lang) {\n  _lang = _lang || languages[0];\n  if (isSupported(_lang)) {\n    lang = _lang;\n    initData({\n      error: pageLoader.connectionError,\n      success: function() {\n        setRoute(getRoute().path);\n      }\n    });\n  }\n}\n\naddAction('setLang', function({arg}) {\n  setLang(arg);\n});\n\nexport default {\n  setLang,\n  initData,\n  init: function() {\n    languages = setup.languages() || [];\n    if (languages.length) {\n      lang = router.getPath().split('/')[0];\n      lang = isSupported(lang) ? lang : languages[0];\n    }\n    lang = lang || setup.dataFile();\n  },\n  lang: function() {\n    return languages.length ? lang : '';\n  },\n  isRtl: function(lang) {\n    return lang == 'ar';\n  },\n  data: function() {\n    return langData;\n  }\n};\n","import getComp from 'setbp/template/component.js';\nimport {loader, viewUpdate} from 'config/app-config.js';\nimport {testRole} from 'setbp/kernel/roles.js';\nimport storage, {storageTypes} from 'setbp/kernel/storage.js';\nimport eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\nimport {serialCall} from 'setbp/utility/calls.js';\nimport {dummyPageFunc, getPage} from 'setbp/kernel/page-manager.js';\nimport {prePageAssets, postPageAssets} from 'core/asset-loader.js';\n\nvar loginManager, pageData, count = 1;\n\nfunction setLoginManager(_loginManager) {\n  loginManager = _loginManager;\n}\n\nfunction handleAuthError(type, cb) {\n  return loginManager.handleAuthError(type, cb);\n}\n\nfunction showError(data, compName='common/error') {\n  loader.loadContent(getComp(compName, typeof data == 'string' ? {msg: data} : data).$root, viewUpdate);\n}\n\nfunction authError() {\n  showError({error_code: 403, errName: 'authError'});\n}\n\nfunction connectionError() {\n  showError({errName: 'connectionError'});\n}\n\nfunction initError(result) {\n  showError(result, 'init-error');\n}\n\nfunction notFound() {\n  showError(null, 'common/404');\n}\n\nfunction unloadPage() {\n  if (pageData && pageData.pageComp) {\n    'unload' in pageData.page && pageData.page.unload(pageData);\n    eventManager.raiseEvent(eventTypes.unload, pageData);\n  }\n  pageData = null;\n}\n\nfunction handleRoute(route) {\n  if (pageData && pageData.page.handleRoute && pageData.page.handleRoute(pageData, route)) {\n    viewUpdate();\n  } else {\n    loadPage(route);\n  }\n}\n\nfunction loadPage(route) {\n  let page = getPage(route.path);\n  let id = count++;\n  let progressTimeout;\n\n  unloadPage();\n  if (!page) {\n    return notFound();\n  }\n  loader.showBlank(route, page);\n  if (!testRole((page.getRole && page.getRole(route)) || page.role)) {\n    if (storage.get(storageTypes.token)) {\n      return authError();\n    } else {\n      return loginManager.login();\n    }\n  }\n  pageData = {id, page, route};\n  eventManager.raiseEvent(eventTypes.loadStart, pageData);\n  serialCall({\n    condition: function() {\n      return pageData.id == id;\n    },\n    error: function(actionOpts, ...args) {\n      if (actionOpts && actionOpts.jqErr) {\n        errorHandler(0, 0, args[0]);\n      } else {\n        errorHandler(actionOpts, ...args);\n      }\n    }\n  })\n  .add(prePageAssets(page, route, progress(10)))\n  .add(page.once, pageData)\n  .add(preload)\n  .add(postAssets)\n  .go();\n\n  function progress(start) {\n    return function({percent}) {\n      loader.progress(start + percent / 10);\n    };\n  }\n\n  function postAssets(opts, ...args) {\n    clearTimeout(progressTimeout);\n    postPageAssets(page, route, progress(90))({\n      error: opts.error,\n      success: function() {\n        if (pageData.id == id) {\n          pageData.pageComp = page.comp(pageData, ...args);\n          eventManager.raiseEvent(eventTypes.loading, pageData);\n          loader.loadContent(pageData.pageComp.$root, function() {\n            'loaded' in page && page.loaded(pageData, ...args);\n            eventManager.raiseEvent(eventTypes.loaded, pageData);\n            viewUpdate();\n          });\n        }\n      },\n    });\n  }\n\n  function preload(opts) {\n    page.once = dummyPageFunc; // initialized\n    loader.progress(20 + Math.random() * 20);\n    progressTimeout = setTimeout(loader.progress, 500, 40);\n    eventManager.raiseEvent(eventTypes.preload, pageData);\n    page.preload({\n      page,\n      route,\n      progress: function(percent) {\n        clearTimeout(progressTimeout);\n        loader.progress(40 + percent / 2);\n      },\n      error: opts.error,\n      success: opts.success\n    });\n  }\n\n  function errorHandler(error, errors, jqXHR) {\n    if (pageData.id == id) {\n      if (error == 404 || (jqXHR && jqXHR.status == 404)) {\n        notFound();\n      } else if (error == 403 || (jqXHR && jqXHR.status == 403)) {\n        authError();\n      } else if (!error) {\n        connectionError();\n      } else {\n        showError({msg: error, error_code: jqXHR && jqXHR.status});\n      }\n    }\n  }\n}\n\nexport default {handleRoute, handleAuthError, initError, connectionError, setLoginManager};\n","import getComp from 'setbp/template/component.js';\n\nvar pages = {};\n\nfunction createComp({route}) {\n  return getComp(route.path);\n}\n\nfunction createCompFunc(template) {\n  return function() {\n    return getComp(template);\n  };\n}\n\nfunction createPage(template, folder) {\n  template = folder ? folder + '/' + template : template;\n  return {\n    templates: [template],\n    comp: folder ? createCompFunc(template) : createComp\n  };\n}\n\nexport function addPaths(folder, paths) {\n  if (!paths) {\n    paths = folder;\n    folder = 0;\n  }\n  paths.forEach(function(path) {\n    addPage(path, createPage(path, folder));\n  });\n}\n\nexport function addPath(path, template, folder) {\n  addPage(path, createPage(template, folder));\n}\n\nexport function addPage(path, page) {\n  if (pages[path]) {\n    throw 'Path already exists: ' + path;\n  }\n  page.preload = 'preload' in page ? page.preload : dummyPageFunc;\n  page.once = 'once' in page ? page.once : dummyPageFunc;\n  pages[path] = page;\n}\n\nexport function getPage(path) {\n  var page;\n  $.each(pages, function(pattern, value) {\n    if (RegExp('^' + pattern + '$').test(path)) {\n      page = value;\n      return false;\n    }\n  });\n  return page;\n}\n\nexport function dummyPageFunc({success}) {\n  success();\n}\n\nexport function addPrefixedPaths(prefix, paths) {\n  addPaths(paths.map(path => prefix + '/' + path));\n}\n\nexport function addFolderPages(folder, names) {\n  names.forEach(function(name) {\n    addPage(folder + '/' + name, {\n      templates: [folder],\n      comp: function() {\n        return getComp(folder + '/' + name);\n      },\n    });\n  });\n}\n","import {roleFlags} from 'config/user-roles.js';\n\nvar accessFlag = roleFlags.unknown;\n\nfunction setAccessFlag(flag) {\n  if (flag) {\n    accessFlag = flag;\n  }\n  return flag;\n}\n\nfunction testRole(role) {\n  if (role) {\n    return (role & accessFlag) > 0;\n  }\n  return true;\n}\n\nfunction roleFlag(roleList) {\n  var flag = 0;\n  roleList.forEach(function(roleName) {\n    if (roleFlags[roleName]) {\n      flag |= roleFlags[roleName];\n    }\n  });\n  return flag;\n}\n\nfunction cascadeRoleFlag(roleName) {\n  return -(roleFlags[roleName] || 0);\n}\n\nexport {setAccessFlag, testRole, roleFlag, cascadeRoleFlag};\n","import router from 'Router';\n\nvar setjs = {};\nvar currentRoute = {};\nvar oldRoute, skipRout;\n\nfunction makeRoute(path) {\n  var i, route;\n  var parts = path.split('/');\n  var lang = setjs.lang() && parts.splice(0, 1)[0];\n  route = {\n    lang,\n    path: parts.join('/'),\n    pageId: parts[0] || '',\n    slug: parts[1],\n    id: parts[2],\n  };\n  for (i = 3; i < parts.length; i++) {\n    route['id' + (i - 1)] = parts[i];\n  }\n  return route;\n}\n\nfunction baseRouteHandler(path) {\n  let newRoute = makeRoute(path);\n  let fixedPath = setjs.fixPath(path);\n  let lang = setjs.lang();\n  if (path != fixedPath) {\n    setRoute(newRoute.path);\n  } else if (!lang || lang == newRoute.lang) {\n    oldRoute = currentRoute;\n    currentRoute = newRoute;\n    if (!skipRout) {\n      setjs.handleRoute(currentRoute);\n    }\n    skipRout = 0;\n  } else {\n    setRoute(path);\n  }\n}\n\nexport function setRoute(newRoute, _skipRout) {\n  skipRout = _skipRout;\n  router.fire(setjs.getLink(newRoute));\n}\n\nexport function prevRoute() {\n  return oldRoute;\n}\n\nexport function getRoute() {\n  return currentRoute;\n}\n\nexport function reloadPage() {\n  setjs.handleRoute(currentRoute);\n}\n\nexport function initSetjs(setjsExt) {\n  $.extend(setjs, setjsExt);\n}\n\nexport function startApp() {\n  router.init(baseRouteHandler);\n}\n\nexport default setjs;\n","import eventManager from 'setbp/kernel/event-manager.js';\nimport storageTypesInit from 'config/storage-types.js';\nexport {storageTypes} from 'config/storage-types.js';\n\nvar memory = {};\nvar store = {\n  init: function() {\n    storageTypesInit();\n    $.extend(store, {get, set, toggle, remove});\n  }\n};\n\nfunction raise(storeType) {\n  if (storeType.eventAfter) {\n    eventManager.raiseEvent(storeType.eventAfter, get(storeType));\n  }\n}\n\nfunction get(storeType, remove) {\n  var val = memory[storeType.name] || localStorage.getItem(storeType.name);\n  var def = storeType.defaultValue;\n  var type = storeType.type;\n  if (remove) {\n    setTimeout(remove, 0, storeType); // remove after returning value, as an event could be raised\n  }\n  if (type == 'boolean') {\n    val = +val == 1;\n  } else if (type == 'number') {\n    val = isNaN(val) ? 0 : +val;\n  } else if (type == 'object') {\n    try {\n      val = JSON.parse(val);\n      val = val && typeof val == 'object' ? val : def;\n    } catch (e) {\n      val = def;\n    }\n  } else {\n    val = val || def || '';\n  }\n  return val;\n}\n\nfunction set(storeType, value) {\n  if (storeType.type === 'object') {\n    value = JSON.stringify(value || {});\n  } else if (storeType.type === 'number') {\n    value = isNaN(value) ? storeType.defaultValue || 0 : +value;\n  } else if (storeType.type === 'boolean') {\n    value = value ? 1 : 0;\n  }\n  if (storeType.memory) {\n    memory[storeType.name] = value;\n  } else {\n    localStorage.setItem(storeType.name, value);\n  }\n  raise(storeType);\n}\n\nfunction toggle(storeType) {\n  if (storeType.type !== 'boolean') {\n    throw 'The value you want to toggle is not boolean.';\n  }\n  var newVal = !get(storeType);\n  set(storeType, newVal);\n  return newVal;\n}\n\nfunction remove(storeType) {\n  delete memory[storeType.name];\n  localStorage.removeItem(storeType.name);\n  raise(storeType);\n}\n\nexport default store;\n","var $container = $('#main-content');\nvar $prev = $('.initial');\nvar blankTime = 0;\nvar animDuration = 300;\nvar $body = $('body');\nvar $bar = $('<div class=\"progress-bar\">').appendTo($body).hide();\nvar bodyStyle = {};\nvar bodyCls;\n\nfunction progress(percent) {\n  $bar.css({width: Math.min(100, percent) + '%'});\n}\n\nfunction loadContent($content, loaded) {\n  setTimeout(function() {\n    var bodyCss;\n    if (typeof $content === 'string') {\n      $content = $($content);\n    }\n    bodyCss = $content.data('css');\n    if (typeof bodyCss != 'object') {\n      bodyCss = {};\n    }\n    $prev.remove();\n    $prev = $content;\n    $container.append($content);\n    $bar.css({width: '100%'}).fadeOut(animDuration);\n    $('html,body').scrollTop(0);\n    $.each(bodyStyle, function(key) {\n      $body.css(key, '');\n    });\n    $body.attr('id', $content.data('id') || ($content.data('template') || '').replace(/\\//g, '-'))\n         .removeClass(bodyCls)\n         .addClass($content.data('class'))\n         .css(bodyCss);\n    bodyCls = $content.data('class');\n    bodyStyle = bodyCss;\n    $content.find('[data-focus=\"true\"]').focus();\n    loaded && loaded();\n  }, Math.max(0, animDuration - (Date.now() - blankTime)));\n}\n\nfunction showBlank() {\n  blankTime = Date.now();\n  $bar.css({width: 0}).show();\n}\n\nexport default {loadContent, showBlank, progress};\n","$.fn.accordion = function(opts) {\n  var $accordion = this;\n  var aimationTime = opts.time || 500;\n  opts = typeof opts == 'object' ? opts : {};\n  $accordion.find('.accordion-item').each(function() {\n    var $item = $(this);\n    if (!$item.data('accord')) {\n      $item.data('accord', 1).find('.details').css({height: 0});\n      $item.find('.title').on('click', function() {\n        toggle($item);\n      });\n    }\n  });\n  if (opts.index) {\n    let $open = $accordion.find('.accordion-item:nth-child(' + opts.index + ')');\n    if ($open.length) {\n      open($open);\n    }\n  }\n  return $accordion.data('accordion', {toggle});\n\n  function toggle($item) {\n    $item = $item || $accordion.find('.accordion-item.open');\n    if ($item.length) {\n      if ($item.hasClass('open')) {\n        $item.removeClass('open').find('.details').animate({height: 0}, aimationTime);\n        opts.close && opts.close($item);\n      } else {\n        open($item);\n      }\n    }\n  }\n\n  function open($item) {\n    var $inner = $item.find('.inner');\n    var $prev = $item.siblings('.open').removeClass('open');\n    var innerHeight =  $inner.outerHeight();\n    var $summary = $accordion.closest('summary');\n    var $details = $item.find('.details');\n    if (innerHeight) {\n      if ($prev.length && $prev.index() < $item.index()) {\n        let scrollTop = $summary.scrollTop();\n        $summary.animate({\n          scrollTop: scrollTop - $prev.find('.details').height(),\n        }, aimationTime);\n      }\n      $prev.removeClass('open').find('.details').animate({height: 0}, aimationTime);\n      $item.addClass('open');\n      $details.animate({height: innerHeight}, aimationTime, function() {\n        $details.css('height', 'auto');\n      });\n      opts.open && opts.open($item, $item.index());\n    } else {\n      setTimeout(open, 250, $item);\n    }\n  }\n};\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\n\n$.fn.carousel = function (opts) {\n  var index = opts.index || 0;\n  var count = opts.count || opts.$items.length;\n  var isActive = 'isActive' in opts ? opts.isActive : true;\n  var carousel = {\n    index,\n    selectSlide,\n    prev: function() {\n      selectSlide(index - 1, true);\n    },\n    next: function() {\n      selectSlide(index + 1, true);\n    },\n    change: function(_count) {\n      count = _count;\n    },\n    setActive: function(activeState) {\n      isActive = activeState;\n    },\n    stop: function() {\n      clearInterval(carousel.timerHandle);\n    },\n  };\n\n  function setBtnState() {\n    if (opts.isBounded) {\n      opts.$left && opts.$left.toggleClass('disabled', index == 0);\n      opts.$right && opts.$right.toggleClass('disabled', index == count - 1);\n    }\n  }\n\n  function selectSlide(_index, force) {\n    if ((isActive || force) && (!opts.isBounded || (_index >= 0 && _index < count))) {\n      carousel.direction = _index - index;\n      index = _index;\n      if (index < 0) {\n        index = count - 1;\n      } else if (index >= count) {\n        index = 0;\n      }\n      opts.$buttons && opts.$buttons.closest('li').removeClass('active').filter(':eq(' + (index) + ')').addClass('active');\n      carousel.$current = opts.$items && opts.$items.removeClass('active').filter(':eq(' + index + ')').addClass('active');\n      carousel.lastTime = Date.now();\n      carousel.index = index;\n      carousel.prevIndex = index == 0 ? count - 1 : index - 1;\n      carousel.nextIndex = index == count - 1 ? 0 : index + 1;\n      setBtnState();\n      opts.select && opts.select(carousel, opts);\n    }\n  }\n\n  if (opts.$buttons) {\n    opts.$buttons.click(function() {\n      selectSlide($(this).closest('li').index());\n      return false;\n    });\n  }\n\n  if (opts.$left) {\n    opts.$left.click(function() {\n      !opts.$left.hasClass('disabled') && selectSlide(index - 1);\n      return false;\n    });\n  }\n\n  if (opts.$right) {\n    opts.$right.click(function() {\n      !opts.$right.hasClass('disabled') && selectSlide(index + 1);\n      return false;\n    });\n  }\n\n  this.swipe && this.swipe({\n    move: function(x, y) {\n      opts.move && opts.move(carousel, x, y);\n    },\n    swipe: function(changeX) {\n      if (changeX) {\n        selectSlide(index + changeX);\n      }\n    },\n  });\n\n  if (opts.time > 0) {\n    carousel.timerHandle = setInterval(carousel.next, opts.time);\n  }\n\n  setTimeout(function() {\n    opts.created && opts.created(carousel);\n    selectSlide(index, true);\n  });\n\n  if (!opts.keep) {\n    eventManager.addListener(eventTypes.unload, 'carousel', function() {\n      clearInterval(carousel.timerHandle);\n    });\n  }\n  return this.data('carousel', carousel);\n};\n","import {storeValue, resetObject} from 'setbp/utility/objects.js';\n\n$.fn.formJson = function(data, resets) {\n  data = data || {};\n  resetObject(data, resets);\n  this.serializeArray().forEach(function(item){\n    storeValue(data, item.name, item.value);\n  });\n  return data;\n};\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\nimport {closeCls} from 'config/app-config.js';\n\neventManager.addListener(eventTypes.route, 'lightbox', function() {\n  $('.lightbox').remove();\n  $(document).off('keydown.lightbox');\n  $('body').removeClass('lightbox-open');\n});\n\n$.fn.lightbox = function (opts = {}) {\n  var mode = opts.mode || 'lightbox';\n  var delay = opts.delay || (mode == 'sidebar' ? 320 : 20);\n  var $lightbox = $(`<div class=\"${mode}\"></div>`).appendTo('body');\n  var $inner = $('<div class=\"inner\">').appendTo($lightbox);\n  var $btnParent = opts.inner ? $inner : $lightbox;\n  var lightbox = {opts, $lightbox, $inner, destroy, close, replaceContent};\n  var openCls = `${mode}-open`;\n  var openingCls = openCls + 'ing';\n  var closingCls = `${mode}-closing`;\n\n  function replaceContent($content) {\n    $inner.empty().append($content.data('lightbox', lightbox));\n  }\n\n  function destroy(done) {\n    if (!lightbox.closed) {\n      lightbox.closed = true;\n      $(document).off('keydown.lightbox');\n      $('body').addClass(closingCls);\n      setTimeout(function(){\n        $('body').removeClass(openCls).removeClass(closingCls);\n        $lightbox.remove();\n        done && done();\n      }, delay);\n    }\n  }\n\n  function close(force) {\n    if (!opts.noClose || force) {\n      !lightbox.closed && opts.close && opts.close();\n      destroy();\n    }\n  }\n\n  function initCarousel() {\n    if (opts.carousel) {\n      if (!opts.carousel.noBtns) {\n        opts.carousel.$left = opts.carousel.$left || $('<div class=\"nav-btn left\"></div>').appendTo($btnParent);\n        opts.carousel.$right = opts.carousel.$right || $('<div class=\"nav-btn right\"></div>').appendTo($btnParent);\n      }\n      lightbox.carousel = (opts.carousel.$el || $inner).carousel(opts.carousel).data('carousel');\n    }\n  }\n\n  $(document).on('keydown.lightbox', function (e) {\n    if (e.keyCode === 27) {\n      close();\n    } else if (lightbox.carousel && $(e.target).hasClass(openCls)) {\n      if (e.keyCode === 37) {\n        lightbox.carousel.prev();\n      } else if (e.keyCode === 39) {\n        lightbox.carousel.next();\n      }\n    }\n  });\n\n  $inner.append(this);\n  initCarousel();\n  !opts.noClose && addCloseBtn();\n  $('body').addClass(openingCls);\n  setTimeout(function(){\n    $('body').addClass(openCls).removeClass(openingCls);\n    opts.created && opts.created(lightbox);\n  }, delay);\n  return this.data('lightbox', lightbox);\n\n  function addCloseBtn() {\n    var $btn = $(`<button class=\"${closeCls} lightbox-close-btn\"></button>`).appendTo($btnParent).add($lightbox.find('.popup-close'));\n    if (!opts.noBgClose) {\n      $btn = $btn.add($lightbox);\n    }\n    $btn.click(function(e) {\n      var $target = $(e.target);\n      var ownClose = $target.hasClass(mode) || ($target.hasClass('lightbox-close-btn'));\n      if (ownClose || $target.closest('.popup-close').length) {\n        close();\n        if (ownClose) {\n          return false;\n        }\n      }\n    });\n  }\n};\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\n\neventManager.addListener(eventTypes.view, 'animate-visible', function(top, bottom) {\n  $('[data-animation]').not('.animated').each(function() {\n    var $el = $(this);\n    var elTop = $el.offset().top;\n    var elBottom = elTop + $el.height();\n    if (elBottom >= top && elTop <= bottom) {\n      $el.addClass('animated').addClass($el.data('animation'));\n    }\n  });\n});\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\n\neventManager.addListener(eventTypes.init, 'drop-menu', function() {\n  $(document).click(function(e) {\n    var $menuBtn = $('.menu-dropdown-btn');\n    var $found = $menuBtn.find(e.target).add($menuBtn.filter(e.target));\n\n    if ($(e.target).closest('.prevent-close').length) {\n      return;\n    }\n\n    if ($found.length) {\n      var $menu = $found.closest('.menu-dropdown');\n      $menu.toggleClass('open');\n      $('.menu-dropdown.open').not($menu).removeClass('open');\n      return false;\n    } else {\n      $('.menu-dropdown.open').removeClass('open');\n    }\n  });\n});\n","import {addFuncs} from 'core/acts-funcs.js';\nimport {slugify, capitalize} from 'setbp/utility/strings.js';\n\nfunction number(val) {\n  return isNaN(val) ? 0 : +val;\n}\n\naddFuncs({\n  slugify,\n  capitalize,\n  number: function(val, opts, def) {\n    return number(val == undefined ? def : val);\n  },\n  prefix: function(val, opts, str) {\n    return str + val;\n  },\n  suffix: function(val, opts, str) {\n    return val + str;\n  },\n  wrap: function(val, opts, left, right) {\n    return left + val + right;\n  },\n  str: function(val, opts, def = '') {\n    return (val != undefined && val.toString && val.toString()) || def;\n  },\n  fixed: function(val, opts, places) {\n    return number(val).toFixed(places);\n  },\n  equal: function(val, opts, other) {\n    return other == val;\n  },\n  testFlag: function(val, opts, flag) {\n    flag = +flag;\n    return (val & flag) == flag;\n  },\n  bool: function(val) {\n    return !!val;\n  },\n  percent: function(val) {\n    return number(val) + '%';\n  },\n  round: function(val) {\n    return Math.round(number(val));\n  },\n  floor: function(val) {\n    return Math.floor(number(val));\n  },\n  ceil: function(val) {\n    return Math.ceil(number(val));\n  },\n  not: function(val) {\n    return !val;\n  },\n  negate: function(val) {\n    return -number(val);\n  },\n  json: function(val) {\n    return JSON.parse(val);\n  },\n  either: function(condition, opts, val1, val2) {\n    return condition ? val1 : val2;\n  },\n  commaList: function(list) {\n    return list.join(', ');\n  },\n  lowerCase: function(val) {\n    return val.toLowerCase();\n  },\n  includes: function(list, opts, item) {\n    return list.indexOf(item) >= 0;\n  },\n  setEmptyBox: function(val, opts) {\n    opts.$el[0].style.left = val.left;\n    opts.$el[0].style.top = val.top;\n  },\n});\n","import {addFuncs} from 'core/acts-funcs.js';\n\naddFuncs({\n  t: function (val, opts) {\n    opts.$el.text(val);\n  },\n  h: function (val, opts) {\n    opts.$el.html(val);\n  },\n  gt: function(val, opts, other) {\n    return val > other;\n  },\n  lt: function(val, opts, other) {\n    return val < other;\n  },\n  plurify: function(number, {$el}, singular, plural) {\n    plural = plural || singular + 's';\n    number = number || 0;\n    $el.text(number + ' ' + (number == 1 ? singular : plural));\n  },\n});\n","var dloc = document.location;\nvar baseRouteHandler;\n\nfunction processRoute() {\n  baseRouteHandler(getPath());\n}\n\nfunction getPath() {\n  return dloc.pathname.replace(/^(\\/)/, '');\n}\n\nexport default {\n  getPath,\n  prefix: '/',\n  fire: function(route) {\n    window.history.pushState({}, document.title, route);\n    processRoute();\n  },\n  init: function(routeHandler) {\n    baseRouteHandler = routeHandler;\n    window.onpopstate = processRoute;\n    processRoute();\n  }\n};\n","import {fatal, getPropDef, dataForName} from 'setbp/kernel/basics.js';\nimport eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\nimport {func} from 'core/acts-funcs.js';\n\nvar watchSet = new Set();\nvar watchMap = new WeakMap();\n\neventManager.addListener(eventTypes.loaded, 'binding', updateWatches);\n\nfunction getStatements(bindingStr) {\n  var statements = [];\n  var opType = ';';\n  var start = 0;\n  var strip = 0;\n  var i, char, escape;\n\n  for (i = 0; i < bindingStr.length; i++) {\n    char = bindingStr[i];\n    if (char == '`' && bindingStr[i - 1] != '\\\\') {\n      escape = !escape;\n      if (escape && start < i) {\n        parseError(char);\n      }\n      strip = 1;\n    } else if (!escape && (char == ';' || char == ',' || char == '|' || char == ':')) {\n      pushOp();\n      opType = char;\n    }\n  }\n  if (start < i + 1) {\n    pushOp();\n  }\n  return statements;\n\n  function pushOp() {\n    if (escape) {\n      parseError('`');\n    }\n    var item = {\n      o: opType,\n      v: bindingStr.slice(start + strip, i - strip),\n      s: strip,\n    };\n    if (opType != ',' && !item.v) {\n      parseError('val needed');\n    }\n    statements.push(item);\n    start = i + 1; // +1, as \"i\" has not yet incremented in the for loop\n    strip = 0;\n  }\n\n  function parseError(msg) {\n    fatal('bind:' + msg, start, bindingStr);\n  }\n}\n\nfunction createBindings(bindingStr, rdata, isIf) {\n  var bindings = [];\n  var statements = getStatements(bindingStr);\n  var binding, funcBinding;\n  statements.forEach(function(statement) {\n    if (statement.o == ';' || (statement.o == ':' && isIf)) {\n      bindings.push(statement);\n      binding = statement;\n    } else if (statement.o == '|' && !binding.g) {\n      binding.f = binding.f || [];\n      pushFunc(binding.f, statement);\n    } else if (statement.o == ',') {\n      let statementVal = statement.v;\n      funcBinding.p = funcBinding.p || [];\n      statement.s = 1; // literal by default\n      if (statementVal[0] == '~') {\n        statement.v = statementVal.slice(1);\n        if (statement.v[0] != '~') {\n          statement.s = 0; // not a literal\n        }\n      }\n      funcBinding.p.push(statement);\n    } else { // either \"|\" or \":\"\n      let groups = binding.g = binding.g || [];\n      statement.o == ':' && groups.push([]);\n      pushFunc(groups[groups.length - 1], statement);\n    }\n  });\n  return bindings;\n\n  function pushFunc(list, statement) {\n    var funcName = statement.v;\n    funcBinding = {f: rdata[funcName] || func(funcName)};\n    list.push(funcBinding);\n  }\n}\n\nfunction getBindingVal(binding, opts) {\n  var val = binding.v;\n  if (!binding.s) {\n    if (val == '_') {\n      val = opts.data;\n    } else if (val == '#') {\n      val = '';\n    } else {\n      val = getPropDef(val, opts.data);\n      if (typeof val == 'function') {\n        val = val(opts);\n      }\n    }\n  }\n  return val;\n}\n\nfunction runFuncs(funcs, opts, val, applyText) {\n  if (funcs) {\n    funcs.forEach(function(funcBinding) {\n      var args = [val, opts];\n      funcBinding.p && funcBinding.p.forEach(param => {\n        args.push(param.s ? param.v : getBindingVal(param, opts));\n      });\n      val = funcBinding.f.apply(opts, args);\n    });\n  } else if (applyText) {\n    opts.$el.text(val);\n  }\n  return val;\n}\n\nfunction getGroupVal(binding, opts, applyText) {\n  return runFuncs(binding.f, opts, getBindingVal(binding, opts), applyText);\n}\n\nexport function processIf($el, comp, data, dataIf) {\n  let remove = 1;\n  let bindings = createBindings(dataIf, (comp.rComp || comp).data, 1);\n  let opts = {$el, comp, data};\n  let groups = [];\n  $.each(bindings, function(i, binding) {\n    if (binding.o == ';') {\n      groups.push([binding]);\n    } else {\n      groups[groups.length - 1].push(binding);\n    }\n  });\n  $.each(groups, function(i, group) {\n    $.each(group, function(i, binding) {\n      remove = !getGroupVal(binding, opts);\n      return remove;\n    });\n    return !remove;\n  });\n  if (remove) {\n    let $next = $el.next('[data-elif]');\n    $el.remove();\n    if ($next.length) {\n      processIf($next, comp, data, $next.data('elif'));\n    }\n  } else {\n    $el.nextUntil(':not([data-elif])').remove();\n    $el.next('[data-else]').remove();\n  }\n}\n\nfunction runBinding(binding, opts) {\n  let groupVal = getGroupVal(binding, opts, !binding.g);\n  binding.g && binding.g.forEach(function(group) {\n    runFuncs(group, opts, groupVal, 1);\n  });\n}\n\nexport function applyBindings($el, comp, data) {\n  let bindings = createBindings($el.data('bind'), (comp.rComp || comp).data);\n  let opts = {$el, comp, data};\n  bindings.forEach(function(binding) {\n    runBinding(binding, opts);\n  });\n}\n\nfunction ensureWatch(obj) {\n  let watch = watchMap.get(obj);\n  if (!watch) {\n    watch = {obj, props: new Set(), acts: new Set()};\n    watchMap.set(obj, watch);\n    watchSet.add(obj);\n  }\n  return watch;\n}\n\nfunction objChange(parentWatch, oldVal, newVal) {\n  let watch = watchMap.get(oldVal);\n  if (watch) {\n    let newWatch = ensureWatch(newVal);\n    let found = new Set();\n    watch.props.forEach(key => {\n      setupWatch(newWatch, newVal, key);\n      objChange(watch, watch.obj[key], newWatch.obj[key]);\n    });\n    for (let pAct of parentWatch.acts) {\n      for (let wAct of watch.acts) {\n        if (wAct == pAct) {\n          found.add(wAct);\n        }\n      }\n    }\n    for (let act of found) {\n      newWatch.acts.add(act);\n      watch.acts.delete(act);\n      if (act.watch) {\n        act.watch = newWatch;\n        runBinding(act.binding, act.opts);\n      }\n    }\n    cleanupWatch(oldVal);\n  }\n}\n\nfunction setupWatch(watch, obj, key) {\n  if (!watch.props.has(key)) {\n    watch.props.add(key);\n    let val = obj[key];\n    Object.defineProperty(obj, key, {\n      get () {\n        return val;\n      },\n      set (newVal) {\n        if (val !== newVal) {\n          let oldVal = val;\n          val = newVal;\n          objChange(watch, oldVal, newVal);\n          watch.acts.forEach(act => {\n            if (act.watch == watch) {\n              runBinding(act.binding, act.opts);\n            }\n          });\n        }\n      }\n    });\n  }\n}\n\nfunction processWatch(parts, data, act) {\n  let key = parts.shift();\n  let obj = dataForName(key, data);\n  if (obj) {\n    let watch = ensureWatch(obj);\n    let val = obj[key];\n    watch.acts.add(act);\n    setupWatch(watch, obj, key);\n    if (parts.length) {\n      processWatch(parts, val, act);\n    } else {\n      act.watch = watch;\n      runBinding(act.binding, act.opts);\n    }\n  }\n}\n\nexport function cleanupWatch(obj) {\n  var watch = watchMap.get(obj);\n  if (watch) {\n    let remove = [];\n    watch.props.forEach(key => {\n      cleanupWatch(obj[key]);\n    });\n    watch.acts.forEach(act => {\n      if (!act.opts.$el.data('watched')) {\n        remove.push(act);\n      }\n    });\n    remove.forEach(act => {\n      watch.acts.delete(act);\n    });\n    if (!watch.acts.size) {\n      watchMap.delete(obj);\n      watchSet.delete(obj);\n    }\n  }\n}\n\nexport function updateWatches() {\n  watchSet.forEach(obj => {\n    cleanupWatch(obj);\n  });\n}\n\nexport function applyWatch($el, comp, data) {\n  let opts = {$el: $el.data('watched', 1), comp, data};\n  let bindings = createBindings($el.data('watch'), (comp.rComp || comp).data);\n  bindings.forEach(binding => {\n    processWatch(binding.v.split('.'), data, {binding, opts});\n  });\n}\n","import {fatal} from 'setbp/kernel/basics.js';\nimport setjs from 'setbp/kernel/setjs.js';\nimport {applyBindings, processIf, applyWatch, cleanupWatch} from 'setbp/template/binding.js';\nimport {bindEvents} from 'setbp/template/events.js';\nimport {storeItemByName, findWithSelf, funcWithSelf} from 'setbp/utility/comp-helpers.js';\nimport {configData, getConfigTemplate, tmpStr} from 'setbp/template/template-config.js';\nimport {getTemplate} from 'setbp/template/templates.js';\n\nfunction processSlot($item, comp, data, slotConfig) {\n  let slotComp = createComponent(getConfigTemplate('slot', slotConfig), configData(slotConfig, data), comp.actions, comp);\n  let $items = slotConfig.contents ? slotComp.$root.contents() : slotComp.$root;\n  slotConfig.name && storeItemByName(comp, slotConfig.name, slotComp);\n  if (slotConfig.replace) {\n    $item.replaceWith($items);\n  } else {\n    $item.append($items);\n  }\n}\n\nfunction renderList(comp, data, listData) {\n  var config = listData.c;\n  var oldList = listData.list;\n  var elements = [];\n  var index = 0;\n  var list = listData.list = [];\n  $.each(configData(config, data), function(key, val) {\n    var itemData = {\n      [listData.d]: index,\n      [listData.i]: ++index,\n      [listData.k]: key,\n      [listData.v]: val,\n      c: config,\n      pd: data,\n      rd: comp.rComp && comp.rComp.data || data\n    };\n    var itemComp = createComponent(listData.t, itemData, comp.actions, comp);\n    elements.push(itemComp.$root);\n    list.push(itemComp);\n  });\n  if (!elements.length && (config.alt || config.sub)) {\n    elements.push(createComponent(getTemplate(config.alt, config.sub), listData, comp.actions, comp).$root);\n  }\n  listData.$el.empty().append(elements);\n  listData.$elements = $(elements);\n  oldList && oldList.forEach(comp => {\n    cleanupWatch(comp.data);\n  });\n}\n\nfunction createList($el, comp, data) {\n  var config = $el.data('list');\n  var template = getConfigTemplate('list', config, $el.data('tname'));\n  var listData = $.extend({$el, c: config, t: template, i: 'index', k: 'key', v: 'val', d: 'dex'}, config.vars);\n  var name = $el.data('name');\n  if (name) {\n    storeItemByName(comp, name, listData);\n  }\n  renderList(comp, data, listData);\n}\n\n/**\n * Builds a template\n * @param {Object} templateStr - The template html string\n * @param {Object} pComp - The parent component (if any)\n * @param {Object} data - component data\n * @param {Object} actions - event handlers\n * @return {Object} returns the compiled template\n */\nfunction createComponent(templateStr, data, actions, pComp) {\n  var $root, $watchElements, $bindingElements, $actElements, $listElements, comp;\n  data = data || {};\n  actions = actions || {};\n  $root = $(tmpStr(templateStr, data));\n  if ($root.data('if')) {\n    fatal('data-if at root', templateStr);\n  }\n  comp = {\n    $root,\n    data,\n    actions,\n    rComp: pComp && pComp.rComp || pComp,\n    pComp,\n    update: function($selection) {\n      if (!($selection && $selection.jquery)) {\n        $selection = $bindingElements;\n      }\n      $selection.each(function(i, el) {\n        applyBindings($(el), comp, data);\n      });\n      setjs.compUpdate($selection);\n    },\n    renderList: function() {\n      $.each(arguments, function(i, name) {\n        if (comp[name]) {\n          renderList(comp, data, comp[name]);\n          setjs.compUpdate(comp[name].$el);\n        }\n      });\n  }};\n  funcWithSelf($root, 'if', function($item, dataIf) {\n    processIf($item, comp, data, dataIf);\n  });\n  funcWithSelf($root, 'src', function($item, src) {\n    $item.attr('src', src);\n  });\n  funcWithSelf($root, 'val', function($item, val) {\n    $item.attr('value', val);\n  });\n  $watchElements = findWithSelf($root, 'watch');\n  $bindingElements = findWithSelf($root, 'bind');\n  $actElements = findWithSelf($root, 'act');\n  $listElements = findWithSelf($root, 'list');\n  funcWithSelf($root, 'name', function($item, name) {\n    name = '$' + name;\n    if (comp[name]) {\n      fatal('Repeat name', name);\n    }\n    comp[name] = $item;\n  });\n  // You cannot call funcWithSelf() after this, as this might add items which can affect the selection\n  funcWithSelf($root, 'slot', function($item, slotConfig) {\n    processSlot($item, comp, data, slotConfig);\n  });\n  $listElements.each(function(i, item) {\n    createList($(item), comp, data);\n  });\n  $watchElements.each(function(i, item) {\n    applyWatch($(item), comp, data);\n  });\n  $bindingElements.each(function(i, item) {\n    applyBindings($(item), comp, data);\n  });\n  $actElements.each(function(i, item) {\n    bindEvents($(item), comp, data, actions);\n  });\n  $root.data('comp', comp);\n  !pComp && setjs.compUpdate(comp.$root);\n  return comp;\n}\n\nexport default function(templateName, data, actions, pComp) {\n  return createComponent(getTemplate(templateName), data, actions, pComp);\n}\n","import setjs from 'setbp/kernel/setjs.js';\nimport {act} from 'core/acts-funcs.js';\n\nvar events = {\n  down: 'mousedown touchstart',\n  up: 'mouseup touchend',\n  out: 'mouseleave touchleave touchcancel',\n  move: 'mousemove touchmove',\n  form: 'submit',\n};\n\nexport function bindEvents($el, comp, data, actions) {\n  let name = $el.data('name');\n  let acts = ($el.data('act') || '').split(' ');\n  acts.forEach(function(action) {\n    $el.on(events[action] || action, function(e) {\n      var funcName = $el.data('func') || action;\n      var args = {$el, name, action, comp, e, data, arg: $el.data('arg')};\n      setjs.handleEvent(args, actions[funcName] || act(funcName));\n    });\n  });\n}\n","import {fatal, getPropDef} from 'setbp/kernel/basics.js';\nimport {func} from 'core/acts-funcs.js';\nimport {getTemplate} from 'setbp/template/templates.js';\n\nexport function getConfigTemplate(callerName, config, tId) {\n  var templateStr = getTemplate(tId || config.t);\n  if (!templateStr) {\n    fatal('Invalid ' + callerName, config);\n  }\n  $.each(config.vars, function(name, val) {\n    templateStr = templateStr.replace(RegExp('{' + name + '}', 'g'), val);\n  });\n  $.each(config.subs, function(name, val) {\n    templateStr = templateStr.replace(RegExp(name, 'g'), val);\n  });\n  return templateStr;\n}\n\nexport function configData(config, data) {\n  var funcName = config.func;\n  var source = config.prop ? getPropDef(config.prop, data) : data;\n  if (funcName) {\n    let dataFunc = funcName && ((data.rd || data)[funcName] || func(funcName));\n    typeof dataFunc != 'function' && fatal('Not a function', funcName, config, data);\n    source = dataFunc(source, config, data);\n  }\n  return source;\n}\n\nexport function tmpStr(templateStr, data) {\n  return templateStr.replace(/{(?:(o):)?([^{}]+)}/g,\n    function(match, group1, group2) {\n      let result = getPropDef(group2, data);\n      if (typeof result == 'boolean') {\n        result = result ? 1 : 0;\n      }\n      return typeof result == 'string' || typeof result == 'number' ? result : group1 ? '' : match;\n    }\n  );\n}\n","import {fatal} from 'setbp/kernel/basics.js';\nimport {funcWithSelf} from 'setbp/utility/comp-helpers.js';\n\nvar templates = {};\nvar doneUrls = {};\nvar tId = 1;\n\nexport function ensureTemplates({urls = [], success, error}) {\n  var done = 0;\n  urls = urls.filter(url => !doneUrls[url]);\n  if (!urls.length) {\n    success();\n  }\n  urls.forEach(function(url) {\n    $.get(url)\n      .done(function(templateStr) {\n        loadTemplates(templateStr);\n        doneUrls[url] = true;\n        if (++done == urls.length) {\n          success();\n        }\n      })\n      .fail(error);\n  });\n}\n\nfunction extractListHtml($list) {\n  var listHtml = $list.html();\n  var config = $list.data('list');\n  let tName = config.t;\n  if (!tName) {\n    tName = 't_' + tId++;\n    if ($list.children().length != 1) {\n      fatal('data-list must have one child', config);\n    }\n    templates[tName] = listHtml;\n  }\n  $list.attr('data-tname', tName).empty();\n}\n\nfunction processList($parent) {\n  var selector = '[data-list]';\n  var $childLists = $parent.find(selector);\n  var tree = [];\n  if ($childLists.length) {\n    $childLists.each(function(index, el) {\n      var $el = $(el);\n      var depth = $el.parents(selector).length;\n      tree[depth] = tree[depth] || [];\n      tree[depth].push($el);\n    });\n    tree.reverse().forEach(function(branch) {\n      branch.forEach(extractListHtml);\n    });\n  }\n  $parent = $parent.filter(selector);\n  $parent.length && extractListHtml($parent);\n}\n\nexport function loadTemplates(templateStr) {\n  var $html = $(templateStr);\n  funcWithSelf($html, 'template', function($item, name) {\n    if (templates[name]) {\n      fatal('Template exists', name);\n    }\n    processList($item);\n    templates[name] = $item[0].outerHTML;\n  });\n}\n\nexport function getTemplate(templateName, alt) {\n  if (templates[templateName] || alt) {\n    return templates[templateName] || alt;\n  } else {\n    fatal('No such template', templateName);\n  }\n}\n","import getComp from 'setbp/template/component.js';\n\nexport default function(opts) {\n  let isBusy = 0;\n  let exOpts = $.extend({noBtn: opts.noTxt, noClose: 1}, opts);\n  let alertComp = getComp('common/alert-box', exOpts, {\n    no: function() {\n      if (isBusy) return;\n      lightbox.destroy();\n      opts.no && opts.no(controller, alertComp);\n    },\n    ok: function() {\n      if (isBusy) return;\n      if (opts.ok) {\n        isBusy = 1;\n        alertComp.$root.addClass('loading');\n        opts.ok(controller, alertComp);\n      } else {\n        lightbox.destroy();\n      }\n    },\n  });\n  let lightbox = alertComp.$root.lightbox(exOpts).data('lightbox');\n  var controller = {\n    error: function(error) {\n      exOpts.errorMsg = error.message || error;\n      alertComp.$root.removeClass('loading');\n      alertComp.update();\n      isBusy = 0;\n    },\n    close: function() {\n      lightbox.destroy();\n    }\n  };\n  return controller;\n}\n","export function sort (items, prop, direction) {\n  if (!items) {\n     return;\n  }\n  direction = direction || 1;\n  items.sort(function (a, b) {\n     if (a[prop] > b[prop]) {\n        return direction;\n     }\n     if (a[prop] < b[prop]) {\n        return direction * -1;\n     }\n     return 0;\n  });\n  return items;\n}\n\nexport function removeFromList(list, value) {\n  for (var i = 0; i < list.length; i++) {\n    if (list[i] == value) {\n      list.splice(i, 1);\n      return i;\n    }\n  }\n}\n\nexport function removeFromListByValue(list, value, prop1, prop2) {\n  for (var i = list.length - 1; i >= 0 ; i--) {\n    if (list[i][prop1] == value || (arguments.length > 3 && list[i][prop2] == value)) {\n      list.splice(i, 1);\n      return i;\n    }\n  }\n}\n\nexport function indexOf(list, value, prop) {\n  for (var i = 0; i < list.length; i++) {\n     if ((prop ? list[i][prop] : list[i]) === value) {\n        return i;\n     }\n  }\n  return -1;\n}\n\n//Knuth-Fisher-Yates\nexport function shuffle(array) {\n  var counter = array.length, temp, index;\n  while (counter > 0) {\n    index = Math.floor(Math.random() * counter);\n    counter--;\n    temp = array[counter];\n    array[counter] = array[index];\n    array[index] = temp;\n  }\n  return array;\n}\n\nexport function getUniqueList(list, prop) {\n  var unique = [];\n  var done = {};\n  list.forEach(function(obj) {\n    var thing = obj[prop];\n    if (!done[thing]) {\n      done[thing] = 1;\n      unique.push(thing);\n    }\n  });\n  return unique;\n}\n\nexport function obtain(list, value, prop1, prop2, prop3) {\n  for (var i = 0; i < list.length; i++) {\n    if (list[i][prop1] == value || (arguments.length > 3 && list[i][prop2] == value) || (arguments.length > 4 && list[i][prop3] == value)) {\n      return {index: i, val: list[i]};\n    }\n  }\n}\n\nexport function getVal(list, value, prop) {\n  var result = obtain(list, value, prop);\n  return result && result.val;\n}\n\nexport function randItem(list) {\n  return list[Math.floor(Math.random() * list.length)];\n}\n\nexport function randItems(list, count) {\n  return shuffle(list.slice()).slice(0, count);\n}\n\nexport function spinIndex(limit, change, current = 0) {\n  var index = current + change;\n  limit = limit.length || limit;\n  if (index < 0) {\n    index += limit;\n  }\n  return index % limit;\n}\n\nexport function listOverlap(list1, list2, prop) {\n  var overlap = [];\n  list1.forEach(one => {\n    if (prop) {\n      let found = obtain(list2, one[prop], prop);\n      if (found) {\n        overlap.push(one);\n      }\n    } else {\n      if (list2.indexOf(one) >= 0) {\n        overlap.push(one);\n      }\n    }\n  });\n  return overlap;\n}\n","var loaded = {};\n\nexport function getFileMimeType(file, callback) {\n  if (window.File && window.FileReader && window.FileList && window.Blob) {\n    var filereader = new FileReader();\n    filereader.onload = function(evt) {\n      var hex = Array.prototype.slice.call(new Uint8Array(evt.target.result)).map(x => x.toString(16)).join('').toUpperCase();\n      var reg = /^(FFD8FF(?:DB|E[01238]))|^(89504E47)|^(47494638)/;\n      var result = hex.replace(reg, function(m, jpg, png, gif) {\n        return jpg ? 'jpeg' : (png ? 'png' : (gif ? 'gif' : ''));\n      });\n      var type = (reg.test(hex) && `image/${result}`) || file.type || '';\n      var ext = type.split('/')[1];\n      callback(type, ext == 'jpeg' ? 'jpg' : ext);\n    };\n    filereader.onerror = function() {\n      callback(file.type, file.type && file.type.split('/')[1]);\n    };\n    filereader.readAsArrayBuffer(file.slice(0, 4));\n  }\n}\n\nexport function fileAsDataURL(file, onload) {\n  var reader = new FileReader();\n  reader.addEventListener('load', function () {\n    onload(reader.result);\n  }, false);\n  reader.readAsDataURL(file);\n}\n\nfunction processUrlLoad(url, el, success, error) {\n  if (loaded[url]) {\n    processLoaded();\n  } else {\n    el.id = ('id_' + Date.now() + Math.random()).replace('.', '');\n    el.onload = function() {\n      loaded[url] = {status: 2, id: el.id};\n      processLoaded();\n    };\n    el.onerror = function() {\n      loaded[url] = {status: 0};\n      $('head').find('#' + el.id).remove();\n      processLoaded();\n    };\n    loaded[url] = {status: 1};\n    document.getElementsByTagName('head')[0].appendChild(el);\n  }\n\n  function processLoaded() {\n    var {status} = loaded[url];\n    if (status == 1) { // pending\n      setTimeout(processLoaded, 500);\n    } else if (status == 2) {\n      success && success();\n    } else {\n      error && error();\n    }\n  }\n}\n\nexport function unloadHead(url) {\n  if (loaded[url]) {\n    $('head #' + loaded[url].id).remove();\n    loaded[url] = 0;\n  }\n}\n\nexport function loadJS(url, success, error) {\n  var el = document.createElement('script');\n  el.src = url;\n  processUrlLoad(url, el, success, error);\n}\n\nexport function loadCSS(url, success, error) {\n  var el = document.createElement('link');\n  el.rel = 'stylesheet';\n  el.href = url;\n  processUrlLoad(url, el, success, error);\n}\n\n\nexport function loadUrls(urls, kind, success, errorCb) {\n  var done = 0;\n  if (testArray(urls, success)) {\n    urls.forEach(function(url) {\n      (kind == 'css' ? loadCSS : loadJS)(url, function() {\n        done++;\n        if (done == urls.length) {\n          success();\n        }\n      }, errorCb);\n    });\n  }\n}\n\nfunction testArray(obj, otherwise) {\n  if (Array.isArray(obj) && obj.length) {\n    return true;\n  } else {\n    otherwise();\n  }\n}\n\nfunction loadJSCSS(urls, success, errorCb) {\n  var done = 0;\n  if (testArray(urls, success)) {\n    urls.forEach(function(url) {\n      (/\\.css(?:\\?.*)*$/.test(url) ? loadCSS : loadJS)(url, function() {\n        done++;\n        if (done == urls.length) {\n          success();\n        }\n      }, errorCb);\n    });\n  }\n}\n\nexport function loadAssets({urlSets, success, error, errMsg}) {\n  var done = 0;\n  if (testArray(urlSets, success)) {\n    urlSets.forEach(function(urls) {\n      loadJSCSS(urls, function() {\n        done++;\n        if (done == urlSets.length) {\n          success();\n        }\n      }, function() {\n        if (error) {\n          error(errMsg);\n          error = 0;\n        }\n      });\n    });\n  }\n}\n\n\nexport function loadImage({url, success, error, complete}) {\n  var img = new Image();\n  img.onload = function() {\n    success && success(img);\n    complete && complete(1, img);\n  };\n  img.onerror = function(...args) {\n    error && error(args);\n    complete && complete(0, args);\n  };\n  img.src = url;\n  return {\n    cancel: function() {\n      success = null;\n      error = null;\n      complete = null;\n    }\n  };\n}\n\n// list is either an array of URL strings or a jQuery collection\nexport function loadImages(list, done) {\n  var count = 0;\n  var urls = list;\n  var result = {};\n  if (!(list && list.length)) {\n    return done();\n  }\n  if (list.jquery) {\n    urls = [];\n    list.each(function() {\n      urls.push($(this).attr('src'));\n    });\n  }\n  urls.forEach(function(item) {\n    var url = item.url || item;\n    loadImage({\n      url,\n      complete: function(code, data) {\n        count++;\n        result[item.id || url] = code ? {item, img: data} : {item, errors: data};\n        if (count == urls.length) {\n          done(result);\n        }\n      }\n    });\n  });\n}\n\nexport function imageAJAX(opts) {\n  $.ajax({\n    type: 'GET',\n    url: opts.url,\n    error: opts.error,\n    success: opts.success,\n    complete: opts.complete,\n    beforeSend: function(jqXHR) {\n      if (opts.prog) {\n        jqXHR.onprogress = function(e) {\n          if (e.lengthComputable){\n            opts.prog((e.loaded / e.total * 100) || 0);\n          }\n        };\n      }\n    }\n  });\n}\n","import {getProp} from 'setbp/utility/objects.js';\n\n// https://davidwalsh.name/javascript-debounce-function#comment-509154\n// Returns a function, that, as long as it continues to be invoked, will only\n// trigger every N milliseconds. If <code>immediate</code> is passed, trigger the\n// function on the leading edge, instead of the trailing.\nexport function throttle(func, wait = 250, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\n// https://davidwalsh.name/javascript-debounce-function\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func, wait = 250, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\nexport function batchCall({success, error, progress}) {\n  var done = 0;\n  var result = {};\n  var calls = [];\n  var callManager = {\n    go,\n    add: function(func, opts, key, prop) {\n      calls.push({func, opts, key, prop});\n      return callManager;\n    },\n  };\n  return callManager;\n\n  function go() {\n    if (!calls.length) {\n      success(result);\n    }\n    calls.forEach(function(item) {\n      item.func($.extend({}, item.opts, {\n        error: function(errObj) {\n          typeof error == 'function' && error(errObj);\n          error = 1;\n        },\n        success: function(res) {\n          done++;\n          if (item.key) {\n            result[item.key] = item.prop ? getProp(item.prop, res) : res;\n            item.opts && item.opts.success && item.opts.success(res);\n          }\n          if (error != 1 && progress) {\n            progress({done, rem: calls.length - done, percent: Math.round(100 * done / calls.length)});\n          }\n          if (done == calls.length) {\n            success(result);\n          }\n        }\n      }));\n    });\n  }\n}\n\nexport function serialCall({condition, success, error}) {\n  var calls = [];\n  var callManager = {\n    go,\n    add: function(func, opts) {\n      calls.push({func, opts});\n      return callManager;\n    },\n  };\n  return callManager;\n\n  function go(...args) {\n    if (calls.length) {\n      if ((!condition || condition())) {\n        var item = calls.shift();\n        var opts = $.extend({success: go, error}, item.opts);\n        item.func(opts, ...args);\n      }\n    } else {\n      success && success();\n    }\n  }\n}\n","import {fatal} from 'setbp/kernel/basics.js';\n\nexport function storeItemByName(comp, name, item) {\n  if (comp[name]) {\n    fatal('Repeat name', name);\n  }\n  comp[name] = item;\n}\n\nexport function funcWithSelf($el, dataName, func) {\n  findWithSelf($el, dataName).each(function(i, item) {\n    var $item = $(item);\n    func($item, $item.data(dataName));\n  });\n}\n\nexport function findWithSelf($el, dataName) {\n  dataName = '[data-' + dataName + ']';\n  return $el.find(dataName).addBack(dataName);\n}\n","import eventManager, {eventTypes} from 'setbp/kernel/event-manager.js';\n\nvar pending = [];\n\neventManager.addListener(eventTypes.view, 'lazy-media', function(top, bottom, height) {\n  for (var i = pending.length - 1; i >= 0; i--) {\n    if ($.contains(document.body, pending[i].$el[0])) {\n      if (loadFullMedia(pending[i], height)) {\n        pending.splice(i, 1);\n      }\n    } else {\n      pending.splice(i, 1);\n    }\n  }\n  manageVideos();\n});\n\nsetInterval(manageVideos, 1000);\n\nfunction manageVideos() {\n  var width = $(window).width() + 200;\n  var height = $(window).height();\n  pending.filter(x => x.isReady).forEach(function(item) {\n    var {left, top, right, bottom} = item.$el[0].getBoundingClientRect();\n    if (right < -200 || left > width || bottom < 0 || top > height) {\n      item.pause();\n    } else {\n      item.play();\n    }\n  });\n}\n\nfunction loadFullMedia(item, height) {\n  var {$el, type, url} = item;\n  var {top, bottom} = $el[0].getBoundingClientRect();\n  if (bottom >= 0 && top <= height) {\n    if (item.loadFunc) {\n      item.loadFunc(item);\n    } else if (type == 'vid') {\n      if (!item.video) {\n        item.play = play;\n        item.pause = pause;\n        item.video = item.getVideo();\n        item.video.oncanplay = videoCallback;\n        if (item.video.readyState > 3) {\n          videoCallback();\n        }\n      }\n      return;\n    } else {\n      processImage();\n    }\n    return true;\n  }\n\n  function mediaLoaded() {\n    $el.addClass('loaded');\n  }\n\n  function videoCallback() {\n    item.video.muted = true;\n    item.video.oncanplay = null;\n    item.isReady = true;\n    mediaLoaded();\n  }\n\n  function pause() {\n    if (!item.video.paused) {\n      item.video.pause();\n    }\n  }\n\n  function play() {\n    if (item.isReady && item.video.paused) {\n      item.video.play();\n    }\n  }\n\n  function processImage() {\n    $('<img>').on('load', function() {\n      if (type == 'bg') {\n        $el.css('background-image', 'url(' + url + ')');\n        mediaLoaded();\n      } else {\n        $el.on('load', mediaLoaded).attr('src', url);\n      }\n    }).attr('src', url);\n  }\n}\n\nexport function lazyMedia(opts) {\n  var {$el} = opts;\n  if (!$el.attr('data-lm')) { // use attribute as other plugins may want to select it using this attribute\n    $el.attr('data-lm', 1);\n    processLazy();\n  }\n  function processLazy() {\n    if ($.contains(document.body, $el[0])) {\n      if (!loadFullMedia(opts, $(window).height())) {\n        pending.push(opts);\n      }\n    } else {\n      setTimeout(processLazy, 250);\n    }\n  }\n}\n\nexport function lazyImg($el, url) {\n  lazyMedia({$el, url, type: 'src'});\n}\n\nexport function makeLazy(type) {\n  return function(url, {$el}) {\n    if (url) {\n      lazyMedia({$el, type, url});\n    } else {\n      $el.parent('figure').remove();\n      $el.remove();\n    }\n  };\n}\n","function processType(path, val) {\n  var type = path.slice(-1);\n  if (path[path.length - 2] == ':') {\n    path = path.slice(0, -2);\n    if (type == 'n') {\n      val = +val;\n    } else if (type == 'b') {\n      val = !!val;\n    }\n  }\n  return {path, val};\n}\n\nfunction listIndex(str) {\n  if (str.length) {\n    if (isNaN(str)) {\n      return str;\n    } else {\n      return +str;\n    }\n  }\n}\n\nfunction parsePath(path) {\n  var parts = [];\n  var mark = 0;\n  var skip;\n  for (var i = 0; i < path.length; i++) {\n    if (skip) {\n      if (path[i] == ']') {\n        parts.push({list: 1, key: path.slice(mark, skip), index: listIndex(path.slice(skip + 1, i))});\n        mark = i + 1;\n        skip = 0;\n      }\n    } else if (path[i] == '[') {\n      skip = i;\n      if (!i) {\n        throw 'Bad object config ' + path;\n      }\n    } else if (path[i] == '.') {\n      addObj();\n      mark = i + 1;\n    }\n  }\n  addObj();\n  return parts;\n\n  function addObj() {\n    if (mark < i) {\n      parts.push({key: path.slice(mark, i)});\n    }\n  }\n}\n\nfunction resetItem(data, parts, key, config, index) {\n  var part = parts[index++];\n  if (index < parts.length) {\n    data = data[part];\n    if (Array.isArray(data)) {\n      data.forEach(function(listItem) {\n        resetItem(listItem, parts, key, config, index);\n      });\n    } else if (data) {\n      resetItem(data, parts, key, config, index);\n    }\n  } else {\n    if ('val' in config) {\n      data[part] = typeof config.val == 'function' ? config.val() : config.val;\n    } else if (config.arr) {\n      data[part] = [];\n    } else if (config.obj) {\n      data[part] = {};\n    } else {\n      delete data[part];\n    }\n  }\n}\n\nexport function resetObject(data, resets) {\n  $.each(resets, function(key, config) {\n    resetItem(data, key.split('.'), key, config, 0);\n  });\n}\n\nfunction partIndex(part, arr) {\n  return part.list ? part.index != null ? part.index : arr.length : null;\n}\n\nexport function storeValue(target, _path, _val) {\n  var {path, val} = processType(_path, _val);\n  var parts = parsePath(path);\n  var index;\n  parts.forEach(function(part, i) {\n    let end = i == parts.length - 1;\n    if (Array.isArray(target)) {\n      storeInArray(part, end);\n    } else {\n      storeInObject(part, end);\n    }\n    index = partIndex(part, target);\n  });\n\n  function storeInObject(part, end) {\n    let tmp = target[part.key];\n    if (part.list) {\n      tmp = Array.isArray(tmp) ? tmp : [];\n      if (end) {\n        tmp[partIndex(part, tmp)] = val;\n      }\n    } else {\n      if (end) {\n        tmp = val;\n      } else {\n        tmp = typeof tmp == 'object' ? tmp : {};\n      }\n    }\n    target = target[part.key] = tmp;\n  }\n\n  function storeInArray(part, end) {\n    let tmp = target[index];\n    if (part.list) {\n      if (part.key) {\n        if (typeof tmp != 'object') {\n          tmp = target[index] = {};\n        }\n        tmp = tmp[part.key] = Array.isArray(tmp[part.key]) ? tmp[part.key] : [];\n      } else {\n        tmp = target[index] = Array.isArray(tmp) ? tmp : [];\n      }\n      if (end) {\n        tmp[partIndex(part, tmp)] = val;\n      }\n    } else {\n      target[index] = tmp = typeof tmp == 'object' ? tmp : {};\n      if (end) {\n        tmp[part.key] = val;\n      } else {\n        tmp = tmp[part.key] = {};\n      }\n    }\n    target = tmp;\n  }\n}\n\nexport function copyObj(target, source, props) {\n  props.forEach(prop => {\n    storeValue(target, prop, getProp(prop, source));\n  });\n  return target;\n}\n\nexport function getProp(propPath, data, data2) {\n  let parts = propPath.split('.');\n  for (let j = 0; data && j < parts.length; j++) {\n    if (j == parts.length - 1 && parts[j] in data) {\n      return data[parts[j]];\n    }\n    data = data[parts[j]];\n  }\n  if (data2) {\n    return getProp(propPath, data2);\n  }\n}\n","export function capitalize(string) {\n   return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n//https://stackoverflow.com/a/8831937/2211098\n//https://github.com/darkskyapp/string-hash\nexport function getStrHash(str) {\n  var hash = 5381, i = (str && str.length) || 0;\n  while(i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n  return hash >>> 0;\n}\n\n/**\n * A simple solution to replace variables in templates\n * http://javascript.crockford.com/remedial.html\n * @param {string} string\n * @param {string} o\n * @return {string}\n */\nexport function supplant(string, o) {\n    return string.replace(/{([^{}]*)}/g,\n      function(a, b) {\n        var r = o,\n        parts = b.split('.');\n        for (var i = 0; r && i < parts.length; i++) {\n          r = r[parts[i]];\n        }\n        return typeof r === 'string' || typeof r === 'number' ? r : a;\n      }\n    );\n}\n\n/**\n * getInitials - Create initials from full name\n * @param {string} name - full name\n * @return {string} - The initials\n*/\nexport function getInitials(name) {\n  var initials;\n  try {\n    initials = name.toUpperCase().match(/\\b\\w/g);\n    if (initials.length > 1) {\n      initials = initials.shift() + initials.pop();\n    } else {\n      initials = initials.shift();\n    }\n  } catch (e) {\n    initials = name.charAt(0);\n  }\n\n  return initials;\n}\n\nexport function prettyTime(num) {\n    return (num < 10 ? '0' : '') + num;\n}\n\nexport function timeToText(ms) {\n    var total_seconds = ms / 1000;\n    var hours = Math.floor(total_seconds / 3600);\n    total_seconds = total_seconds % 3600;\n    var minutes = Math.floor(total_seconds / 60);\n    total_seconds = total_seconds % 60;\n    var seconds = Math.floor(total_seconds);\n\n    hours = prettyTime(hours);\n    minutes = prettyTime(minutes);\n    seconds = prettyTime(seconds);\n    return hours + ':' + minutes + ':' + seconds;\n}\n\n// https://medium.com/@mhagemann/the-ultimate-way-to-slugify-a-url-string-in-javascript-b8e4a0d849e1\nexport function slugify(string) {\n  const a = '/_,:;';\n  const b = 'aaaaaaaaaacccddeeeeeeeegghiiiiiilmnnnnoooooooooprrsssssttuuuuuuuuuwxyyzzz------';\n  const p = new RegExp(a.split('').join('|'), 'g');\n  return string.toString().toLowerCase()\n    .replace(/\\s+/g, '-') // Replace spaces with -\n    .replace(p, c => b.charAt(a.indexOf(c))) // Replace special characters\n    .replace(/&/g, '-and-') // Replace & with 'and'\n    .replace(/[^\\w-]+/g, '') // Remove all non-word characters\n    .replace(/--+/g, '-') // Replace multiple - with single -\n    .replace(/^-+/, '') // Trim - from start of text\n    .replace(/-+$/, ''); // Trim - from end of text\n}\n"],"sourceRoot":""}